<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="基础算法,">










<meta name="description" content="动态规划往往是求解最大最小值的问题，在求解这类问题的过程中，往往最终是需要得到某种多次决策的链条 在什么决策都没做的情况下，我们称此时问题处于初始状态，在一个状态下，所能做出的决策往往和状态有关，决策造成的影响也和状态有关，不同的决策会使得问题走向不同状态 待求解问题也会在一次一次决策中分解为一个一个的子问题，子问题在待求解问题求解的过程中可能会被重复求解，因此动态规划过程往往需要额外存储一些子问">
<meta name="keywords" content="基础算法">
<meta property="og:type" content="article">
<meta property="og:title" content="算法题整理——动态规划">
<meta property="og:url" content="http://yoursite.com/2023/01/16/算法题整理——动态规划/index.html">
<meta property="og:site_name" content="Jameci&#39;s Blog">
<meta property="og:description" content="动态规划往往是求解最大最小值的问题，在求解这类问题的过程中，往往最终是需要得到某种多次决策的链条 在什么决策都没做的情况下，我们称此时问题处于初始状态，在一个状态下，所能做出的决策往往和状态有关，决策造成的影响也和状态有关，不同的决策会使得问题走向不同状态 待求解问题也会在一次一次决策中分解为一个一个的子问题，子问题在待求解问题求解的过程中可能会被重复求解，因此动态规划过程往往需要额外存储一些子问">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/0.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/1.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/2.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/3.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/4.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/5.png">
<meta property="og:image" content="http://yoursite.com/images/算法题整理——动态规划/6.png">
<meta property="og:updated_time" content="2023-02-09T13:37:01.239Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="算法题整理——动态规划">
<meta name="twitter:description" content="动态规划往往是求解最大最小值的问题，在求解这类问题的过程中，往往最终是需要得到某种多次决策的链条 在什么决策都没做的情况下，我们称此时问题处于初始状态，在一个状态下，所能做出的决策往往和状态有关，决策造成的影响也和状态有关，不同的决策会使得问题走向不同状态 待求解问题也会在一次一次决策中分解为一个一个的子问题，子问题在待求解问题求解的过程中可能会被重复求解，因此动态规划过程往往需要额外存储一些子问">
<meta name="twitter:image" content="http://yoursite.com/images/算法题整理——动态规划/0.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2023/01/16/算法题整理——动态规划/">





  <title>算法题整理——动态规划 | Jameci's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jameci's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">天下雷行，物与无妄。先王以茂对时，育万物。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/01/16/算法题整理——动态规划/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jameci">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jameci's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">算法题整理——动态规划</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-01-16T23:33:36+08:00">
                2023-01-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础算法/" itemprop="url" rel="index">
                    <span itemprop="name">基础算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>动态规划往往是求解最大最小值的问题，在求解这类问题的过程中，往往最终是需要得到某种多次决策的链条</p>
<p>在什么决策都没做的情况下，我们称此时问题处于初始状态，在一个状态下，所能做出的决策往往和状态有关，决策造成的影响也和状态有关，不同的决策会使得问题走向不同状态</p>
<p>待求解问题也会在一次一次决策中分解为一个一个的子问题，子问题在待求解问题求解的过程中可能会被重复求解，因此动态规划过程往往需要额外存储一些子问题的解以增进效率</p>
<p>动态规划能解决的问题有很多，同时动态规划的变种也有很多，这使得相关的问题可以很简单也可以很复杂</p>
<h1 id="数字三角形"><a href="#数字三角形" class="headerlink" title="数字三角形"></a>数字三角形</h1><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>数字三角形指的是这样的图形：第一行只有一个数字，从第一行开始，每个数字的左下和右下方各有一个数字</p>
<p><img src="/images/算法题整理——动态规划/0.png" alt></p>
<p>现在有一个非负数组成的数字三角形，我们希望能够找到这样一条从上向下的路径：它从第一行开始，每次只能向左下或者右下，直到最后一行，并且经过的数字之和最大</p>
<p>记第i行的第j个数为<code>a[i][j]</code></p>
<h2 id="递归方法"><a href="#递归方法" class="headerlink" title="递归方法"></a>递归方法</h2><p>不妨把我们需要解决的问题记做solve(1,1)，如果去掉第一行，可以把下面的部分看做是两个重叠的数字三角形，如果我们能够解决solve(2,1)和solve(2,2)，那么有</p>
<p><code>solve(1,1)=max(solve(2,1),solve(2,2))+a[1][1]</code></p>
<p>对于n层的数字三角形，底层<code>solve(n,i)=a[n][i]</code></p>
<h2 id="记忆化搜索"><a href="#记忆化搜索" class="headerlink" title="记忆化搜索"></a>记忆化搜索</h2><p>显然，这样做的时间复杂度是O(2^n)，这个算法是正确的，但它的问题在于重复计算，比如：在计算solve(2,1)时，需要计算solve(3,2)，而计算solve(2,2)时，solve(3,2)又被计算了一次</p>
<p>不妨另外设置一个数组ret，保存已经计算过的solve的值。因为这里的数字三角形是非负数，可以把ret的初值设置成0，表示该点还没有计算过</p>
<p>这样，计算solve(i,j)时，先判断solve(i+1,j),solve(i+1,j+1)是否计算过，若是，就直接去ret里面取出</p>
<p>对于每个结点只计算一次，记忆化搜索的复杂度是O(n^2)</p>
<h2 id="递推"><a href="#递推" class="headerlink" title="递推"></a>递推</h2><p>也可以从下向上推出最大值，我们仍然使用ret数组去存储已经计算得到的值，那么对于第n行，<code>ret[n][i]=a[n][i]</code>，继续向上的每一行，有</p>
<p><code>ret[i][j]=a[i][j]+max(ret[i+1][j],ret[i+1][j+1]</code></p>
<p>这样，对于每个结点，最多也只计算一次，复杂度仍为O(n^2)</p>
<h1 id="DAG上的动态规划"><a href="#DAG上的动态规划" class="headerlink" title="DAG上的动态规划"></a>DAG上的动态规划</h1><p>DAG是有向无环图（Directed Acyclic Graph）的简称。许多动态规划问题可以转化为有向无环图上的最长、最短路、以及路径计数问题</p>
<h2 id="嵌套矩形问题"><a href="#嵌套矩形问题" class="headerlink" title="嵌套矩形问题"></a>嵌套矩形问题</h2><h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>有n个矩形，每个矩形可以使用两个整数a，b（即长宽）来描述，其中若一个矩形A为a1，b1，另一个矩形B为a2，b2，且a1&gt;=a2，b1&gt;=b2，那么我们称B可以被嵌套在A中。现在给出n个矩形的描述，找出尽可能多的矩形，使它们可以排成一行，除排在最后的矩形之外。这一行的每一个矩形都能嵌套在后面的矩形里。如果有多个解，找出矩形编号的字典序最小的解</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>对于n个矩形，可以将其看做n个顶点，如果有一对矩形之间有嵌套关系，且A嵌套于B，那么可以把这种关系看成是一条有向边（A,B）。问题就转化为如何在DAG上面找到一条最长的路，且端点的字典序最小。</p>
<p>要完成这个转化，首先要进行图的建立。</p>
<h3 id="PAG上的最长路及其字典序"><a href="#PAG上的最长路及其字典序" class="headerlink" title="PAG上的最长路及其字典序"></a>PAG上的最长路及其字典序</h3><p>我们把以端点i为起点的最长路的长度记做<code>d[i]</code>，那么有</p>
<p><code>d[i]=max(d[j]+1|(i,j)∈E)</code></p>
<p>(i,j)∈E的条件是指从i到j的边存在。如果不存在这样的点j，上述式子的结果只好为0了。</p>
<p>为了避免重复计算，我们把数组d初始化为-1，这样，当我们计算时需要<code>d[i]</code>的值时，先去检查它是否为-1，若是，我们需要先将它算出来。</p>
<p>为了找到PAG上的最长路，我们需要遍历所有端点来计算它们的d。</p>
<p>输出时，为了保证字典序，我们需要从找到的最长路起点出发，依次访问d值等于当前端点d值-1并且在当前端点的邻接点中字典序是最小的点输出。</p>
<h2 id="硬币问题"><a href="#硬币问题" class="headerlink" title="硬币问题"></a>硬币问题</h2><h3 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h3><p>有n种硬币，面值为V1,V2,V3…Vn，每种有无限多，给定S为一个非负整数，选用若干枚硬币，使得正好能凑出S，输出所用硬币数量的最大值和最小值</p>
<h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>可以把0~n的每一个面值看成是一个端点，如果从一个值A可以凑到另一个值B，那么（A,B）属于E，这样可以构建DAG，从而问题转化成求固定端点到另一个固定端点的最短路和最长路问题</p>
<h3 id="固定端点的最长路问题"><a href="#固定端点的最长路问题" class="headerlink" title="固定端点的最长路问题"></a>固定端点的最长路问题</h3><p>这样一来，似乎区别不大–只需要从S开始记忆化搜索到0就可以了，状态转移方程依然是上面的</p>
<p><code>d[i]=max(d[j]+1|(i,j)∈E)</code></p>
<p>最短路改成min就好</p>
<p>但这样有一个严重的问题，如果搜索的某条路无法到达0怎么办。为了避免搜索到负数之后无法停止，我们应该在搜索时判断一下，而且，当无法到达的时候，我们需要让这条路返回一个特殊值，以便于知道这条路是无法到达的</p>
<h1 id="几种经典的树上动态规划问题"><a href="#几种经典的树上动态规划问题" class="headerlink" title="几种经典的树上动态规划问题"></a>几种经典的树上动态规划问题</h1><h2 id="树上的最大独立集"><a href="#树上的最大独立集" class="headerlink" title="树上的最大独立集"></a>树上的最大独立集</h2><h3 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h3><p>对于一颗有n个结点的无向树，选出尽量多的结点，使得任意两个结点不相邻（称为最大独立集）。</p>
<h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>任意选择一个点作为树根，然后记<code>dp[i][0]</code>为不选择i点的情况下，以i点为根的子树上最大独立集的大小，记<code>dp[i][1]</code>为选择i点的情况下，以i点为根的子树上最大独立集的大小。</p>
<p><code>dp[i][0] = Σ(max(dp[j][0], dp[j][1]))|j为i的子节点</code></p>
<p><code>dp[i][1] = Σ(dp[j][0])|j为i的子节点</code></p>
<p>在dfs遍历的过程中更新dp数组的值即可。</p>
<h2 id="树的质心"><a href="#树的质心" class="headerlink" title="树的质心"></a>树的质心</h2><h3 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h3><p>对于一个n个结点的无向树，找到一个点，使得去掉该点时，最大的连通块的点数最小。</p>
<h3 id="解法-1"><a href="#解法-1" class="headerlink" title="解法"></a>解法</h3><p>先任取一个点作为树根，然后记录<code>dp[i]</code>为以i为根的子树的点数。</p>
<p>这样，去电一个点j之后，最大连通块的点数是，<code>max(n-d[j], d[k])|k是j的子节点</code></p>
<h2 id="树的最长路径"><a href="#树的最长路径" class="headerlink" title="树的最长路径"></a>树的最长路径</h2><h3 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h3><p>n个结点无向树上找出一对点，使得它们之间的距离最长。</p>
<h3 id="解法-2"><a href="#解法-2" class="headerlink" title="解法"></a>解法</h3><p>任取一个点作为树根，设<code>dp[i]</code>为以i为根节点的子树到最远的叶子结点的距离。</p>
<p>最后找到根节点下两颗不同子树的最远距离即可。</p>
<h1 id="UVa1025-城市里的间谍"><a href="#UVa1025-城市里的间谍" class="headerlink" title="UVa1025_城市里的间谍"></a>UVa1025_城市里的间谍</h1><h2 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h2><p>某城市的地铁是线性的，有n（2~50）个火车站，它们从左到右依次编号为1~n，有M1辆列车从第一站往右开，还有M2辆列车从最后一站往左开。在时刻0，Mario从第1站出发，目的是在时刻T（0~200）会见车站n的一个间谍。由于停留在车站等车容易被抓，所以她决定尽可能地躲在开动的火车上，让在车站等待的时间尽可能的短</p>
<p>列车靠站的时间忽略不计，Mario身手敏捷，即使有两个不同方向的列车在同一时间一起靠站，她也可以从一辆车钻到另一辆车上</p>
<p>输入第一行为n，第二行为T，第三行为n-1个整数t1，t2…tn-1（1~70），其中ti表示列车从第i站到第i+1站行驶的时间，第四行是M1（1~50），第五行包括M1个整数d1…dm1（0~250），为各列车的出发时间，第六行和第七行格式同四五行，描述向左开的列车，输出仅有一行，表示最少的等待时间，无解则输出impossible</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>时间是一个天然的序，建立状态<code>dp[i][j]</code>用来表示第i分钟时，处于第j站台（从0开始到n-1），需要等待的时间</p>
<p>如此一来，对于某个时刻，有三种选择</p>
<p>1.坐上向左的车（如果有的话）</p>
<p>2.坐上向右的车（如果有的话）</p>
<p>3.原地等一分钟</p>
<p>注意边界条件是<code>dp[t][n-1]=0,dp[t][i]=inf</code>。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxt = <span class="number">2000</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3fffffff</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> m1,m2,n,t;<span class="comment">//向右开的列车数，向左开的列车数，车站数，约定的时间。 </span></span><br><span class="line"><span class="keyword">int</span> sr[maxm],sl[maxm],d[maxn];<span class="comment">//向右开的列车们的发车时间，向左开的，从左到右车站间往来时间 </span></span><br><span class="line"><span class="keyword">int</span> dp[maxt][maxn];<span class="comment">//状态，表示第i分钟时，处于j车站，需要等待的时间。 </span></span><br><span class="line"><span class="keyword">int</span> x[maxt][maxn][<span class="number">2</span>];<span class="comment">//表示i分钟时，处于j车站，两个方向是否有车。 </span></span><br><span class="line"><span class="keyword">int</span> arr[maxn];<span class="comment">//表示从左向右到达某站需要花费时间</span></span><br><span class="line"><span class="keyword">int</span> arl[maxn];<span class="comment">//同上，从右往左。</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(sr,<span class="number">0</span>,<span class="keyword">sizeof</span>(sr));</span><br><span class="line">	<span class="built_in">memset</span>(sl,<span class="number">0</span>,<span class="keyword">sizeof</span>(sl));</span><br><span class="line">	<span class="built_in">memset</span>(d,<span class="number">0</span>,<span class="keyword">sizeof</span>(d));</span><br><span class="line">	<span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">memset</span>(x,<span class="number">0</span>,<span class="keyword">sizeof</span>(x));</span><br><span class="line">	<span class="built_in">memset</span>(arr,<span class="number">0</span>,<span class="keyword">sizeof</span>(arr));</span><br><span class="line">	<span class="built_in">memset</span>(arl,<span class="number">0</span>,<span class="keyword">sizeof</span>(arl));</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">if</span>(!n)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n - <span class="number">1</span>;++i)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,d + i); </span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m1);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; m1;++i)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,sr + i);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m2);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; m2;++i)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,sl + i);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n - <span class="number">1</span>;++i)&#123;</span><br><span class="line">		dp[t][i] = inf;</span><br><span class="line">		arr[i + <span class="number">1</span>] = arr[i] + d[i];</span><br><span class="line">		arl[n - <span class="number">2</span> - i] = arl[n - <span class="number">1</span> - i] + d[n - <span class="number">2</span> - i];</span><br><span class="line">		<span class="comment">//printf("arl[%d] = %d\n",n - 2 - i,arl[n - 2 - i]);</span></span><br><span class="line">	&#125;</span><br><span class="line">	dp[t][n - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt; m1;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; n;++j)</span><br><span class="line">			x[sr[i] + arr[j]][j][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt; m2;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; n;++j)</span><br><span class="line">			x[sl[i] + arl[j]][j][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>)<span class="keyword">return</span> dp[i][j];</span><br><span class="line">	<span class="keyword">if</span>(i &gt;= t)<span class="keyword">return</span> inf;</span><br><span class="line">	<span class="keyword">int</span> r = inf;</span><br><span class="line">	<span class="keyword">if</span>(x[i][j][<span class="number">0</span>] &amp;&amp; (j + <span class="number">1</span> &lt; n))</span><br><span class="line">		r = min(r,cal(i + d[j],j + <span class="number">1</span>));</span><br><span class="line">	<span class="keyword">if</span>(x[i][j][<span class="number">1</span>] &amp;&amp; (j &gt; <span class="number">0</span>))</span><br><span class="line">		r = min(r,cal(i + d[j - <span class="number">1</span>],j - <span class="number">1</span>));</span><br><span class="line">	r = min(r,cal(i + <span class="number">1</span>,j) + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> dp[i][j] = r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//freopen("output.txt","w",stdout);</span></span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(input())&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case Number %d: "</span>,++num);</span><br><span class="line">		init();</span><br><span class="line">		<span class="keyword">int</span> ret = cal(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="comment">/*for(int i = 0;i &lt; t;++i)</span></span><br><span class="line"><span class="comment">			for(int j = 0;j &lt; n;++j)&#123;</span></span><br><span class="line"><span class="comment">				printf("dp[%d][%d] = %d\n",i,j,dp[i][j]);</span></span><br><span class="line"><span class="comment">				printf("x[%d][%d] = %d %d\n",i,j,x[i][j][0],x[i][j][1]);</span></span><br><span class="line"><span class="comment">			&#125;*/</span></span><br><span class="line">		<span class="keyword">if</span>(ret != inf)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ret);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"impossible\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="错误思路和反思"><a href="#错误思路和反思" class="headerlink" title="错误思路和反思"></a>错误思路和反思</h2><p>拿到这道题，最初是往DAG上面去考虑的，思路是通过某种方式把它转化为DAG上的最大最小值问题。最终思考的结果是，把各个列车看成是端点，列车之间的换乘关系看成是边，并且在不同的列车之间的换乘，需要等待的最小时间是一定的（这个需要一番推理，但由于这是错误思路，所以不再证明）。这样就可以建立一个有向二部图。在此基础上添加抽象的起点和终点。最终转化为带权有向无环图上的最短路问题</p>
<p>这个思路的问题出在这里：有向无环图的边权值难求，建立图的过程比较困难。即使建成图之后，可能也很难控制无环这一点（因为实际上是有环的，只能通过记忆刚刚搜到的节点来控制，这样一来就无法为每一个点设置状态）</p>
<p>出现这种错误思路的原因在于对于动态规划的不熟悉，只练习过比较初级的动态规划问题。动态规划中，可能状态的转移才是较为本质的一点，而非转化为DAG什么的。解决的问题量太少了，有点思维定式</p>
<h1 id="UVa437-巴比伦塔"><a href="#UVa437-巴比伦塔" class="headerlink" title="UVa437_巴比伦塔"></a>UVa437_巴比伦塔</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给出n种长方体，每种长方体的数量无限，使用它们搭建巴比伦塔，规则是，将一个长方体搭建在另一个长方体的上面，下面的长方体的长必须严格大于上面长方体的长，下面长方体的宽必须严格大于上面长方体的宽。每种长方体都可以旋转，即使用任意一条边作为长宽高</p>
<p>要求得出所能搭建的巴比伦塔的最高高度</p>
<h2 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h2><p>对于每种长方体，假设三条棱的长为x，y，z，我们都可以旋转出六种状态，对于底面，我们只取较长的棱为长，较短的棱为宽。这样每种长方体只有三种状态，即：</p>
<p>取x为高</p>
<p>取y为高</p>
<p>取z为高</p>
<p>我们把这三种状态看成是三个端点，那么如果某个状态的长方体j可以堆在另一个状态的长方体i上，我们把这种关系看成是端点之间有一条有向边，记为<code>v[i][j]=1</code></p>
<p>如此这般，可以建立一张有向无环图，问题也就转化为了有向无环图上的最大值问题</p>
<p>状态<code>dp[i]</code>表示以长方体i为底，最高的巴比伦塔的高度</p>
<p>那么有：</p>
<p><code>dp[i]=height[i]+max(dp[j]|j可以放置在i上，即v[i][j]=1)</code></p>
<h2 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">30</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,pn;</span><br><span class="line"><span class="keyword">int</span> v[maxn * <span class="number">3</span>][maxn * <span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> dp[maxn * <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> height;</span><br><span class="line">	<span class="keyword">int</span> width;</span><br><span class="line">	<span class="keyword">int</span> length;</span><br><span class="line">&#125;p[maxn * <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">input</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(p,<span class="number">0</span>,<span class="keyword">sizeof</span>(p));</span><br><span class="line">	<span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">if</span>(!n)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> x,y,z;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n;++i)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">		p[i * <span class="number">3</span>].height = x;</span><br><span class="line">		p[i * <span class="number">3</span>].width = (y &gt; z ? z : y);</span><br><span class="line">		p[i * <span class="number">3</span>].length = (y &gt; z ? y : z);</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">1</span>].height = y;</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">1</span>].width = (x &gt; z ? z : x);</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">1</span>].length = (x &gt; z ? x : z);</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">2</span>].height = z;</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">2</span>].width = (y &gt; x ? x : y);</span><br><span class="line">		p[i * <span class="number">3</span> + <span class="number">2</span>].length = (y &gt; x ? y : x);</span><br><span class="line">	&#125;</span><br><span class="line">	pn = n * <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; pn;++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; pn;++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>((p[i].width &gt; p[j].width) &amp;&amp; (p[i].length &gt; p[j].length))&#123;</span><br><span class="line">				v[i][j] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[r] == <span class="number">-1</span>)&#123;</span><br><span class="line">		<span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; pn;++i)&#123;</span><br><span class="line">			<span class="keyword">if</span>(v[r][i])&#123;</span><br><span class="line">				ret = max(ret,cal(i));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		dp[r] = ret + p[r].height;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[r];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> id = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//freopen("output.txt","w",stdout);</span></span><br><span class="line">	<span class="keyword">while</span>(input())&#123;</span><br><span class="line">		create();</span><br><span class="line">		<span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; pn;++i)&#123;</span><br><span class="line">			ret = max(ret,cal(i));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d: maximum height = %d\n"</span>,++id,ret);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa1347-旅行"><a href="#UVa1347-旅行" class="headerlink" title="UVa1347_旅行"></a>UVa1347_旅行</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>某个飞行员决定去旅行，他把要去的地方用二维坐标(x,y)来表示成若干个点。他的策略是：从这些地点中最左边的出发(即x最小)，严格向右走到最右边的点，然后再严格向左回到第一个点，除了起点，每个点只到达一次。为了节省经费，他希望在此基础上找到一条最短的路。</p>
<p>输入从x最小的点开始，严格按x递增的顺序。每两个点的x坐标不同。</p>
<h2 id="分析-3"><a href="#分析-3" class="headerlink" title="分析"></a>分析</h2><p>可以看做是两个人从起点出发，分别选择下一步到达的点，最终一起走到终点，使每个点都被且仅被两个人中的一个走过。这样，设置<code>d[i][j]</code>作为一个人在点i，另一个人在点j，两人总共还要走多远。</p>
<p>这样做的问题是，当状态转移时，比如第一个人想从i走到k，他不知道k有没有被走到过。我们观察题目给出的策略可以知道，当一个人走到i时，他是不能走到编号比i小的点的，否则，将违反策略中的x严格增加。那么我们可以设置<code>d[i][j]</code>的含义为，两人走过1~max(i,j)的点后，并且两人分别处于编号为i和j的点上，两人还需要走的距离。</p>
<p>并且，我们发现，<code>d[i][j]=d[j][i]</code>，所以可以令i&gt;j，那么对于状态<code>d[i][j]</code>，由于所有的点都必须有人走到过，所以点i+1要么被第一个人走，要么被第二个人走。这时，得出状态转移式：</p>
<p><code>dp[i][j]=min(dist(i,i+i)+dp[i+1][j],dist(j,i+1)+dp[i+1][i])</code></p>
<p>其中dist是计算两点之间距离的函数。</p>
<p>当i等于n时，其中一人已经走到终点，对第二个人来说，只需要也走到终点就好了。所以此时的状态为：</p>
<p><code>dp[n][j]=dist(j,n)</code></p>
<h2 id="解决-2"><a href="#解决-2" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">double</span> d[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> v[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> x[maxn];</span><br><span class="line"><span class="keyword">int</span> y[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">sqrt</span>((x[i] - x[j]) * (x[i] - x[j]) + (y[i] - y[j]) * (y[i] - y[j]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(v[i][j])<span class="keyword">return</span> d[i][j];</span><br><span class="line">	</span><br><span class="line">	v[i][j] = <span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(i == n)<span class="keyword">return</span> d[i][j] = dist(j, n);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> d[i][j] = min((dist(i, i + <span class="number">1</span>) + cal(i + <span class="number">1</span>, j)), (dist(j, i + <span class="number">1</span>) + cal(i + <span class="number">1</span>, i)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//freopen("output.txt","w",stdout);</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(v, <span class="number">0</span>, <span class="keyword">sizeof</span>(v));</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;x[i], &amp;y[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, cal(<span class="number">1</span>, <span class="number">1</span>));	</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*for(int i = 1;i &lt;= n;++i)&#123;</span></span><br><span class="line"><span class="comment">			for(int j = 1;j &lt;= n;++j)&#123;</span></span><br><span class="line"><span class="comment">				printf("%lf\n",d[i][j]);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa116-单向TSP"><a href="#UVa116-单向TSP" class="headerlink" title="UVa116_单向TSP"></a>UVa116_单向TSP</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>给出m行n列的矩阵，从第一列的某一个数字开始走，每次只能向右，右上或者右下三个方向中的一个走，找到一条路径使得从第一列开始到最后一列结束，途经的数字之和最小。</p>
<p>矩阵是环形的，最上方的数字和最最下方的数字是相邻的。</p>
<p>m不超过10，n不超过100，要求输出路径。</p>
<h2 id="分析-4"><a href="#分析-4" class="headerlink" title="分析"></a>分析</h2><p>设置<code>dp[i][j]</code>作为从矩阵i行j列这个数字开始走到最后一列的最小值。有</p>
<p><code>dp[i][j] = mat[i][j] + min(dp[i][j + 1], dp[(i + 1) % m][j + 1], dp[(i - 1) % m][j + 1])</code></p>
<p>并且有：</p>
<p><code>dp[i][n - 1] = mat[i][n - 1]</code></p>
<p>为了输出路径，在计算完dp数组之后，再从dp数组的第一列开始，依次取最小值即可。</p>
<h2 id="解决-3"><a href="#解决-3" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">10</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> m,n;</span><br><span class="line"><span class="keyword">int</span> dp[maxm][maxn];</span><br><span class="line"><span class="keyword">int</span> mat[maxm][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>)<span class="keyword">return</span> dp[i][j];</span><br><span class="line">	<span class="keyword">if</span>(j == n - <span class="number">1</span>)<span class="keyword">return</span> dp[i][j] = mat[i][j];</span><br><span class="line">	<span class="keyword">return</span> dp[i][j] = mat[i][j] + min(min(cal((i + <span class="number">1</span>) % m, j + <span class="number">1</span>), cal((i + m - <span class="number">1</span>) % m, j + <span class="number">1</span>)), cal(i, j + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;m, &amp;n) != EOF)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; m;++i)&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; n;++j)&#123;</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mat[i][j]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> minn = <span class="number">0x7fffffff</span>;</span><br><span class="line">		<span class="keyword">int</span> s;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; m;++i)&#123;</span><br><span class="line">			<span class="keyword">int</span> temp = cal(i, <span class="number">0</span>);</span><br><span class="line">			<span class="keyword">if</span>(temp &lt; minn)&#123;</span><br><span class="line">				minn = temp;</span><br><span class="line">				s = i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d"</span>,s + <span class="number">1</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; n - <span class="number">1</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">int</span> tempdp = dp[s][j + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> temps = s;</span><br><span class="line">			<span class="keyword">if</span>(tempdp &gt; dp[(s + <span class="number">1</span>) % m][j + <span class="number">1</span>])&#123;</span><br><span class="line">				tempdp = dp[(s + <span class="number">1</span>) % m][j + <span class="number">1</span>];</span><br><span class="line">				temps = (s + <span class="number">1</span>) % m;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(tempdp == dp[(s + <span class="number">1</span>) % m][j + <span class="number">1</span>])&#123;</span><br><span class="line">				<span class="keyword">if</span>((s + <span class="number">1</span>) % m &lt; temps)&#123;</span><br><span class="line">					temps = (s + <span class="number">1</span>) % m;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(tempdp &gt; dp[(s + m - <span class="number">1</span>) % m][j + <span class="number">1</span>])&#123;</span><br><span class="line">				tempdp = dp[(s + m - <span class="number">1</span>) % m][j + <span class="number">1</span>];</span><br><span class="line">				temps = (s + m - <span class="number">1</span>) % m;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(tempdp == dp[(s + m - <span class="number">1</span>) % m][j + <span class="number">1</span>])&#123;</span><br><span class="line">				<span class="keyword">if</span>((s + m - <span class="number">1</span>) % m &lt; temps)&#123;</span><br><span class="line">					temps = (s + m - <span class="number">1</span>) % m;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			s = temps;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">" %d"</span>,s + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n%d\n"</span>,minn);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*for(int i = 0;i &lt; m;++i)&#123;</span></span><br><span class="line"><span class="comment">			for(int j = 0;j &lt; n;++j)&#123;</span></span><br><span class="line"><span class="comment">				printf("%d ", dp[i][j]);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">			printf("\n");</span></span><br><span class="line"><span class="comment">		&#125;*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="0-1背包"><a href="#0-1背包" class="headerlink" title="0-1背包"></a>0-1背包</h1><h2 id="引子——无限背包问题"><a href="#引子——无限背包问题" class="headerlink" title="引子——无限背包问题"></a>引子——无限背包问题</h2><p>有一个背包，可以容纳体积不超过C的物品，现在物品有n种，每种体积为Vi，价值为Wi，都有无限多个，问最多使用这个背包最多可以拿走价值为多少的物品。</p>
<p>可以假设<code>dp[ci]</code>表示体积不超过ci的情况下可以拿走物品的最大总价值。那么：</p>
<p><code>dp[ci] = max(w[i] + dp[ci - v[i]]|ci - v[i] &gt;= 0)</code></p>
<p>如果已经找不到比剩余体积还要小的物品，则在计算时返回0。比如最小的物品体积为3，那么计算到<code>dp[2]</code>时应该直接得出为0。</p>
<h2 id="0-1背包问题"><a href="#0-1背包问题" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h2><p>背包同上，但是每种物品只有一个，这时，剩余体积已经不足以描述状态。假如物品A和B拥有同样的体积3，背包的初始容积是6，那么仅凭状态<code>dp[3]</code>无法得知我们现在拿走的是A还是B。</p>
<p>为此，引入“层”的概念，我们以<code>dp[i][j]</code>表示对前面i-1个物品的决策已经完毕，背包的剩余体积为j，此时的最大收益。那么，接下来是第i个物品，我们可以选择要或者不要，有：</p>
<p><code>dp[i][j] = max(dp[i + 1][j], dp[i + 1][j - v[i]] + w[i])</code></p>
<p>当<code>j &lt; v[i]</code>时，自然没得选了，只能选择不拿。</p>
<p>当i等于n-1时，说明已经到了最后一件物品，显然，如果能拿走是必拿走的，返回的是该物品的价值，如果拿不走，只能返回0了。</p>
<h1 id="UVA12563-劲歌金曲"><a href="#UVA12563-劲歌金曲" class="headerlink" title="UVA12563_劲歌金曲"></a>UVA12563_劲歌金曲</h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>一般来说，去KTV唱歌的时候，当最后一首歌还在播放，即使时间已经到了，KTV也不会“鲁莽”地把歌切掉，这样，如果我们卡准机会，就可以在最后多唱一段时间。</p>
<p>有一首歌叫劲歌金曲，长达678秒，假定在唱KTV时，有n首歌可以点（不包括劲歌金曲，每首歌不会超过三分钟，n小于50），每首歌只唱一次，在时间就快结束的时候，点一首劲歌金曲。要求点的曲目尽量的多，并且，在曲目同样多的情况下，唱的时间要尽量地长。</p>
<p>输出唱的曲子数和时间。</p>
<h2 id="分析-5"><a href="#分析-5" class="headerlink" title="分析"></a>分析</h2><p>0-1背包问题，假设状态<code>dp[i][j]</code>表示对前i-1首歌已经做出了选择，还剩的时间为j，这时符合条件的最优情况。由于需要考虑的因素有两个，一个是曲目数，另一个是唱的时间，所以每个节点都需要保存两个整数。</p>
<p>由于总要留一点时间给劲歌金曲，所以初始状态应该是<code>dp[0][t-1]</code>，t是给定的时间。</p>
<h2 id="解决-4"><a href="#解决-4" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50</span> + <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxt = <span class="number">60</span> * <span class="number">3</span> * maxn;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> jgjq = <span class="number">678</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxt][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> songs[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j][<span class="number">0</span>] != <span class="number">-1</span>)<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">if</span>(i == n - <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(j &gt;= songs[n - <span class="number">1</span>])&#123;</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = songs[n - <span class="number">1</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(j &gt;= songs[i])&#123;</span><br><span class="line">			cal(i + <span class="number">1</span>, j - songs[i]);</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = dp[i + <span class="number">1</span>][j - songs[i]][<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = dp[i + <span class="number">1</span>][j - songs[i]][<span class="number">1</span>] + songs[i];</span><br><span class="line">			cal(i + <span class="number">1</span>, j);</span><br><span class="line">			<span class="keyword">if</span>(dp[i][j][<span class="number">0</span>] &lt; dp[i + <span class="number">1</span>][j][<span class="number">0</span>])&#123;</span><br><span class="line">				dp[i][j][<span class="number">0</span>] = dp[i + <span class="number">1</span>][j][<span class="number">0</span>];</span><br><span class="line">				dp[i][j][<span class="number">1</span>] = dp[i + <span class="number">1</span>][j][<span class="number">1</span>];</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(dp[i][j][<span class="number">0</span>] == dp[i + <span class="number">1</span>][j][<span class="number">0</span>])&#123;</span><br><span class="line">				<span class="keyword">if</span>(dp[i][j][<span class="number">1</span>] &lt; dp[i + <span class="number">1</span>][j][<span class="number">1</span>])&#123;</span><br><span class="line">					dp[i][j][<span class="number">1</span>] = dp[i + <span class="number">1</span>][j][<span class="number">1</span>];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			cal(i + <span class="number">1</span>, j);</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = dp[i + <span class="number">1</span>][j][<span class="number">0</span>];</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = dp[i + <span class="number">1</span>][j][<span class="number">1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> T;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> id = <span class="number">0</span>; id &lt; T; ++id)&#123;</span><br><span class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">		<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;t);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;songs[i]);</span><br><span class="line">			sum += songs[i];</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(sum &lt; t)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Case %d: %d %d\n"</span>, id + <span class="number">1</span>, n + <span class="number">1</span>, sum + jgjq);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			cal(<span class="number">0</span>, t - <span class="number">1</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Case %d: %d %d\n"</span>, id + <span class="number">1</span>, dp[<span class="number">0</span>][t - <span class="number">1</span>][<span class="number">0</span>] + <span class="number">1</span>, dp[<span class="number">0</span>][t - <span class="number">1</span>][<span class="number">1</span>] + jgjq);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="51Nod1134-最长递增子序列"><a href="#51Nod1134-最长递增子序列" class="headerlink" title="51Nod1134_最长递增子序列"></a>51Nod1134_最长递增子序列</h1><h2 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h2><p>给出一串整数数列，计算出其最长递增子序列的长度。</p>
<p>如2,4,5,7,8,6,3,1,4,9的最长递增子序列为2,4,5,7,8,9。</p>
<p>数列的长度不会超过50000。</p>
<h2 id="分析-6"><a href="#分析-6" class="headerlink" title="分析"></a>分析</h2><p>记录下从第一个数字开始，到第i个数字为结尾的最大递增子序列长度di。这样，计算以第i个数字为结尾的最大递增子序列长度时，假设第j个位置的数字为sj，记录为dj（j&lt;i），如果sj&lt;si，那么i就可以接在以j为结尾的子序列上，这时子序列的长度是sj+1，遍历所有i之前的数字，选出最大sj+1的作为si的值。</p>
<p>如此这般，复杂度是O(n^2)的。会超时。</p>
<p>我们可以看到，在计算每个数字的d值时，总是要遍历之前的所有数字，实际上，这里是可以简化的。</p>
<p>我们举一个例子来说明，假设数列的前四个数是1，3，2，4，那么我们可以得到，在计算d3之前，有d0 = 1，d1 = 2，d2 = 2（如下图）</p>
<p><img src="/images/算法题整理——动态规划/1.png" alt></p>
<p>那么，计算d3的时候，我们可以发现，我们只关注两件事，即前面的数字是不是比我小？如果小的话，它的d是多少。我们假设把已经计算了的数列部分重新排列，使其更加有序，如下图：</p>
<p><img src="/images/算法题整理——动态规划/2.png" alt></p>
<p>需要注意的是，尽管重新排列了，di值仍然是原来的值，如图中的3对应di值并没有变成3。</p>
<p>这样做的好处是什么，当我计算下一个数是si的di值，我需要找到小于si的数的d值，由于之前的数字已经是按序排好的，我可以更快的查找到小于si的数。</p>
<p>但是仍然不够好，因为即使可以使用诸如二分查找来简化查找的过程，找到第一个小于si的数，我仍然需要遍历所有小于si的数来更新d值。</p>
<p>那么，我们仔细观察一下，可以发现数字2和数字3的作用似乎区别不那么大，所有可以接在数字3之后的数字，同样可以接在数字2后面，结果是一样的，但由于数字2比数字3要小，如果在他们俩后面出现了一个3，就只能接在数字2后面了。</p>
<p>这样一来，我们可以说，数字2的作用不会比数字3要差，所以，我们可以删掉数字3，用数字2来代替它。</p>
<p>这样一来，我们要做的事情就变得简单了，我们可以维护一个类似于栈的结构，它是从小到大排列好的，当计算si的d值时，我们拿出这个栈，看其中有没有一个数，它恰好是第一个比si大的数，我们说，di的值就是这个数的d值，并且，我们用si来代替这个数在栈中的位置。如果没有这样的数怎么办，这就说明了si大于栈中所有数，可以直接将si压入栈顶。</p>
<p>这样的时间复杂度是O(nlogn)</p>
<h2 id="解决-5"><a href="#解决-5" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50000</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> str[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, maxx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> h = v.size() - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> m = (h + l) / <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">while</span>(h != l)&#123;</span><br><span class="line">		<span class="keyword">if</span>(v[m] &lt; x)&#123;</span><br><span class="line">			l = m + <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			h = m;</span><br><span class="line">		&#125;</span><br><span class="line">		m = (h + l) / <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">		<span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(v.empty() || v.back() &lt; str[i])&#123;</span><br><span class="line">			v.push_back(str[i]);</span><br><span class="line">			ret = v.size();</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			ret = f(str[i]);</span><br><span class="line">			<span class="keyword">if</span>(v[ret] != str[i])&#123;</span><br><span class="line">				v[ret] = str[i];</span><br><span class="line">				++ret;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		maxx = maxx &lt; ret ? ret : maxx;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;str[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	cal();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, maxx);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVA11400-照明系统设计"><a href="#UVA11400-照明系统设计" class="headerlink" title="UVA11400_照明系统设计"></a>UVA11400_照明系统设计</h1><h2 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h2><p>设计一个照明系统，其中有n（n&lt;=1000）种灯泡可以选择，每种灯泡由v，k，c，l四个数值，分别表示其电压，电源价格，灯泡价格和需求量。</p>
<p>电压高的灯泡可以替代电压低的灯泡，同种灯泡可以共用一个电源（每种灯泡的电源只需要购买一个），问照明系统的最小花费是多少。</p>
<h2 id="分析-7"><a href="#分析-7" class="headerlink" title="分析"></a>分析</h2><p>很关键的一点是，如果使用一种灯泡替代了另一种灯泡，那么替代多少最合算呢？如果用A种灯泡去替代一部分B种灯泡，剩下的B种灯泡仍然需要单独购买B种电源，不合算。</p>
<p>所以，要么一种灯泡不被替代，要么全被另一种所替代。那么为什么不能被两种所共同替代呢？如上述的B种灯泡，一半换成A，一半换成C，假设A替代B，一个可以省10元，C替代B，一个省5元，显然这种一半一半的方式不如全部让A来替代。</p>
<p>这样，灯泡之间的替代关系构成了一种顺序，我们可以先根据电压把灯泡从小到大排序，然后用<code>dp[i]</code>来表示只有前面i个灯泡时的最少花销。当加入第i+1种灯泡时，有：</p>
<p><code>dp[i + 1] = min(dp[j] + k[i + 1] + c[i + 1] * sum[j ~ i + 1])|j &lt; i</code></p>
<h2 id="解决-6"><a href="#解决-6" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">light</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v, k, c, l;</span><br><span class="line">&#125;lights[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, dp[maxn], s[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(light a, light b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.v &lt; b.v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) &amp;&amp; n)&#123;</span><br><span class="line">		s[<span class="number">0</span>] = <span class="number">0</span>, dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>, &amp;lights[i].v, &amp;lights[i].k, &amp;lights[i].c, &amp;lights[i].l);</span><br><span class="line">		&#125;</span><br><span class="line">		sort(lights + <span class="number">1</span>, lights + n + <span class="number">1</span>, cmp);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)s[i] = s[i - <span class="number">1</span>] + lights[i].l;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">			dp[i] = <span class="number">0x7fffffff</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j)&#123;</span><br><span class="line">				dp[i] = min(dp[j] + lights[i].k + lights[i].c * (s[i] - s[j]), dp[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[n]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa11584-回文串划分"><a href="#UVa11584-回文串划分" class="headerlink" title="UVa11584_回文串划分"></a>UVa11584_回文串划分</h1><h2 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h2><p>给出字符串，求它最少能被划分成多少个回文串。</p>
<h2 id="分析-8"><a href="#分析-8" class="headerlink" title="分析"></a>分析</h2><p><code>dp[i]</code>表示前i个字符能够被最少划分的次数，那么有</p>
<p><code>dp[i] = min(dp[j - 1] + 1 | s[i~j]是回文串)</code></p>
<p>怎样判断<code>s[i~j]</code>是不是回文串呢，可以预先遍历字符串，以每个字符为中心，向两侧走判断是否相等。</p>
<h2 id="解决-7"><a href="#解决-7" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">char</span> str[<span class="number">1005</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1005</span>];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ind[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = <span class="built_in">strlen</span>(str);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">		<span class="keyword">int</span> l = i;</span><br><span class="line">		<span class="keyword">int</span> r = i;</span><br><span class="line">		<span class="keyword">while</span>((r &lt; n) &amp;&amp; (l &gt;= <span class="number">0</span>) &amp;&amp; (str[l] == str[r]))&#123;</span><br><span class="line">			ind[r++].insert(l--);</span><br><span class="line">		&#125;</span><br><span class="line">		l = i, r = i + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>((r &lt; n) &amp;&amp; (l &gt;= <span class="number">0</span>) &amp;&amp; (str[l] == str[r]))&#123;</span><br><span class="line">			ind[r++].insert(l--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = <span class="built_in">strlen</span>(str);</span><br><span class="line">	dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator j = ind[i - <span class="number">1</span>].begin(); j != ind[i - <span class="number">1</span>].end(); ++j)&#123;</span><br><span class="line">			dp[i] = min(dp[i], dp[*j] + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="keyword">while</span>(n--)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp, <span class="number">0x7f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">		fill(ind, ind + <span class="number">1005</span>, <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;&#123;&#125;);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s"</span>, str);</span><br><span class="line">		init();</span><br><span class="line">		cal();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="built_in">strlen</span>(str)]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>解决这个问题的过程中出现了匪夷所思的现象，明明代码已经被修改了，编译出来依然是原版本的程序，害得我把devc更新了，结果问题还在，cpp文件换了个名字就好了。</p>
<p>runtime error的问题是因为修改函数时忘了把返回值int改成void，结果一直runtime error，我都崩溃了。</p>
<p>如果某个bug让你百思不得其解，那么它一定出现在让你哭笑不得的地方。</p>
<h1 id="UVa1625-颜色的长度"><a href="#UVa1625-颜色的长度" class="headerlink" title="UVa1625_颜色的长度"></a>UVa1625_颜色的长度</h1><h2 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h2><p>给出两个字符串，全都由大写字母组成。</p>
<p>假设c代表字符串中的一个字符，定义:</p>
<p>L(c)= MaxLocation(c)-MinLocation(c)。</p>
<p>其中MaxLocation(c)表示字符串中所有字符c所处的最大位置下标，MinLocation(c)表示字符串中所有字符c所处的最小位置下标。比如字符串AADDSSA，MaxLocation(A)=6，MinLocation(A)=0。</p>
<p>定义sum，为字符串中所有不同字符的L值之和。</p>
<p>现在，把两个字符串归并成一个，求新归并的字符串最小的sum值。</p>
<p>这里的归并类似于两个链表的合并，归并之后，原来同属于一个字符串的字符顺序前后不变。</p>
<h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><p>由于本题只关注sum值，我们不难发现，sum值只和每种字母的最小位置，最大位置有关。</p>
<p>定义<code>dp[i][j]</code>表示把第一个字符串的前(i-1)个字符，第二个字符串的前(j-1)个字符并在一起之后，还需要计算的最小数值。</p>
<p>还需要计算是什么意思呢？假设我们已经把第一个字符串的前(i-1)个字符和第二个字符串的前(j-1)个字符归并到了一起，现在要把第一个字符串的第i个字符放进去，这一步对于整体的sum值贡献是多少呢？这需要看有多少字母是“已经开始但却还未结束”的。</p>
<p>比如字母A，如果在上述的已经合并完毕的i+j-2个字符中，那么我们说A是已经开始了，同样，还未结束指的是，至少有一个字母A处于还没有被归并的字符串中。</p>
<p>那么，我们可以对于每一个位置，定义一个数值来维护这样“已经开始还未结束”的字母个数，进而进行状态转移的数值加权。</p>
<h2 id="解决-8"><a href="#解决-8" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxc = <span class="number">26</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dpnode</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> tag;</span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">dpnode dp[maxn][maxn];</span><br><span class="line"><span class="keyword">char</span> s1[maxn], s2[maxn];</span><br><span class="line"><span class="keyword">int</span> flag1s[maxn], flag2s[maxn];</span><br><span class="line"><span class="keyword">int</span> flag1e[maxn], flag2e[maxn];</span><br><span class="line"><span class="keyword">int</span> f1[maxc * <span class="number">2</span>], f2[maxc * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; maxn; ++j)&#123;</span><br><span class="line">			dp[i][j].tag = <span class="number">0</span>;</span><br><span class="line">			dp[i][j].value = <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(flag1s, <span class="number">0</span>, <span class="keyword">sizeof</span>(flag1s));</span><br><span class="line">	<span class="built_in">memset</span>(flag2s, <span class="number">0</span>, <span class="keyword">sizeof</span>(flag2s));</span><br><span class="line">	<span class="built_in">memset</span>(flag1e, <span class="number">0</span>, <span class="keyword">sizeof</span>(flag1e));</span><br><span class="line">	<span class="built_in">memset</span>(flag2e, <span class="number">0</span>, <span class="keyword">sizeof</span>(flag2e));</span><br><span class="line">	<span class="built_in">memset</span>(f1, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f1));</span><br><span class="line">	<span class="built_in">memset</span>(f2, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f2));</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> n1 = <span class="built_in">strlen</span>(s1);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n1; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f1[s1[i] - <span class="string">'A'</span>] == <span class="number">-1</span>)&#123;</span><br><span class="line">			f1[s1[i] - <span class="string">'A'</span>] = f1[s1[i] - <span class="string">'A'</span> + <span class="number">26</span>] = i;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			f1[s1[i] - <span class="string">'A'</span> + <span class="number">26</span>] = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f1[i] != <span class="number">-1</span>)&#123;</span><br><span class="line">			++flag1s[f1[i]];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">26</span>; i &lt; <span class="number">52</span>; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f1[i] != <span class="number">-1</span>)&#123;</span><br><span class="line">			++flag1e[f1[i]];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> n2 = <span class="built_in">strlen</span>(s2);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n2; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f2[s2[i] - <span class="string">'A'</span>] == <span class="number">-1</span>)&#123;</span><br><span class="line">			f2[s2[i] - <span class="string">'A'</span>] = f2[s2[i] - <span class="string">'A'</span> + <span class="number">26</span>] = i;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			f2[s2[i] - <span class="string">'A'</span> + <span class="number">26</span>] = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f2[i] != <span class="number">-1</span>)&#123;</span><br><span class="line">			++flag2s[f2[i]];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">26</span>; i &lt; <span class="number">52</span>; ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(f2[i] != <span class="number">-1</span>)&#123;</span><br><span class="line">			++flag2e[f2[i]];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ret = <span class="number">0x7fffffff</span>;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j].value != <span class="number">-1</span>)ret = dp[i][j].value;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>((i == <span class="built_in">strlen</span>(s1)) &amp;&amp; (j == <span class="built_in">strlen</span>(s2)))ret = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(i &lt; <span class="built_in">strlen</span>(s1))&#123;</span><br><span class="line">			dp[i + <span class="number">1</span>][j].tag = dp[i][j].tag;</span><br><span class="line">			<span class="keyword">if</span>(flag1s[i])&#123;</span><br><span class="line">				<span class="keyword">if</span>((f2[s1[i] - <span class="string">'A'</span>] &gt;= j) || (f2[s1[i] - <span class="string">'A'</span>] == <span class="number">-1</span>))&#123;</span><br><span class="line">					++dp[i + <span class="number">1</span>][j].tag;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(flag1e[i])&#123;</span><br><span class="line">				<span class="keyword">if</span>((f2[s1[i] - <span class="string">'A'</span> + <span class="number">26</span>] &lt; j) || (f2[s1[i] - <span class="string">'A'</span>] == <span class="number">-1</span>))&#123;</span><br><span class="line">					--dp[i + <span class="number">1</span>][j].tag;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			ret = min(ret, cal(i + <span class="number">1</span>, j) + dp[i][j].tag);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(j &lt; <span class="built_in">strlen</span>(s2))&#123;</span><br><span class="line">			dp[i][j + <span class="number">1</span>].tag = dp[i][j].tag;</span><br><span class="line">			<span class="keyword">if</span>(flag2s[j])&#123;</span><br><span class="line">				<span class="keyword">if</span>((f1[s2[j] - <span class="string">'A'</span>] &gt;= i) || (f1[s2[j] - <span class="string">'A'</span>] == <span class="number">-1</span>))&#123;</span><br><span class="line">					++dp[i][j + <span class="number">1</span>].tag;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(flag2e[j])&#123;</span><br><span class="line">				<span class="keyword">if</span>((f1[s2[j] - <span class="string">'A'</span> + <span class="number">26</span>] &lt; i) || (f1[s2[j] - <span class="string">'A'</span>] == <span class="number">-1</span>))&#123;</span><br><span class="line">					--dp[i][j + <span class="number">1</span>].tag;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			ret = min(ret, cal(i, j + <span class="number">1</span>) + dp[i][j].tag);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[i][j].value = ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">	<span class="keyword">while</span>(t--)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, s1, s2);</span><br><span class="line">		init();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cal(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*for(int i = 0; i &lt; strlen(s1); ++i)&#123;</span></span><br><span class="line"><span class="comment">			printf("%d %d %d\n", i, flag1s[i], flag1e[i]);</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		for(int i = 0; i &lt; strlen(s2); ++i)&#123;</span></span><br><span class="line"><span class="comment">			printf("%d %d %d\n", i, flag2s[i], flag2e[i]);</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		for(int i = 0; i &lt;= strlen(s1); ++i)&#123;</span></span><br><span class="line"><span class="comment">			for(int j = 0; j &lt;= strlen(s2); ++j)&#123;</span></span><br><span class="line"><span class="comment">				printf("%d %d %d %d\n", i, j, dp[i][j].tag, dp[i][j].value);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa10003-切木棍"><a href="#UVa10003-切木棍" class="headerlink" title="UVa10003_切木棍"></a>UVa10003_切木棍</h1><h2 id="题意-5"><a href="#题意-5" class="headerlink" title="题意"></a>题意</h2><p>一条木棍，长度小于1000，需要在n个点进行切割。</p>
<p>已知切割木棍时，一次只能切一个点，切割的费用是根据未切割时木棍的长度算的。</p>
<p>比如一根木棍的长度是10，需要在2,4,7处切割。</p>
<p>先切2，费用是10，</p>
<p>再切4，费用是8，</p>
<p>最后切7，费用是6。</p>
<p>显然不同的切割顺序会影响到总的切割费。</p>
<p>给出一组木棍和切点，求每个的最小费用。</p>
<h2 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h2><p>设<code>dp[i][j]</code>代表在第i，j个点之间切割的最小花费，有：</p>
<p><code>dp[i][j] = min(dp[i][k] + dp[k][j] + cutpoint[j] - cutpoint[i])|i &lt; k &amp;&amp; k &lt; j</code></p>
<p>其中cutpoint是一个记录了各个切点位置的数组。</p>
<h2 id="解决-9"><a href="#解决-9" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxl = <span class="number">1000</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cutpoint[maxn];</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>)<span class="keyword">return</span> dp[i][j];</span><br><span class="line">	<span class="keyword">if</span>(i == j - <span class="number">1</span>)<span class="keyword">return</span> dp[i][j] = <span class="number">0</span>;</span><br><span class="line">	dp[i][j] = inf;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = i + <span class="number">1</span>; k &lt; j; ++k)&#123;</span><br><span class="line">		dp[i][j] = min(dp[i][j], cal(i, k) + cal(k, j) + (cutpoint[j] - cutpoint[i]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> l, n;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;l);</span><br><span class="line">	<span class="keyword">while</span>(l)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">		cutpoint[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;cutpoint[i + <span class="number">1</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">		cutpoint[n + <span class="number">1</span>] = l;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"The minimum cutting is %d.\n"</span>, cal(<span class="number">0</span>, n + <span class="number">1</span>));</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;l);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa1626-括号序列"><a href="#UVa1626-括号序列" class="headerlink" title="UVa1626_括号序列"></a>UVa1626_括号序列</h1><h2 id="题意-6"><a href="#题意-6" class="headerlink" title="题意"></a>题意</h2><p>定义一种“常规”的序列：</p>
<p>1.空字符串是常规序列</p>
<p>2.如果S是常规序列，<code>[S],(S)</code>都是常规序列。</p>
<p>3.如果A,B是常规序列，那么AB是常规序列。</p>
<p>现在给定一组仅由<code>[</code> <code>]</code> <code>(</code> <code>)</code>组成的字符串A，找出这样一个常规序列B，使得它的子序列是A并且B的长度要尽可能小。</p>
<h2 id="分析-9"><a href="#分析-9" class="headerlink" title="分析"></a>分析</h2><p>可以规定<code>dp[i][j]</code>为字符串A还需要添加几个字符才能成为B。</p>
<p>那么有：</p>
<p>i = j 时：</p>
<p><code>dp[i][j] = 1</code></p>
<p>i &lt; j 时：</p>
<p><code>dp[i][j] = min(dp[i][k] + dp[k + 1][j])</code></p>
<p>特殊地，当<code>A[i] = A[j]</code>时，若i = j - 1，直接有：</p>
<p><code>dp[i][j] = 0</code></p>
<p>否则，按照正常的i &lt; j计算完之后，还要加上：</p>
<p><code>dp[i][j] = min(dp[i][j], dp[i + 1][j - 1]</code></p>
<h2 id="解决-10"><a href="#解决-10" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str[maxn];</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>)<span class="keyword">return</span> dp[i][j];</span><br><span class="line">	<span class="keyword">if</span>(i == j)<span class="keyword">return</span> dp[i][j] = <span class="number">1</span>;</span><br><span class="line">	dp[i][j] = inf;</span><br><span class="line">	<span class="keyword">if</span>(((str[i] == <span class="string">'['</span>) &amp;&amp; (str[j] == <span class="string">']'</span>)) || ((str[i] == <span class="string">'('</span>) &amp;&amp; (str[j] == <span class="string">')'</span>)))&#123;</span><br><span class="line">		<span class="keyword">if</span>(i == j - <span class="number">1</span>)dp[i][j] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> dp[i][j] = cal(i + <span class="number">1</span>, j - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; j; ++k)&#123;</span><br><span class="line">		dp[i][j] = min(dp[i][j], cal(i, k) + cal(k + <span class="number">1</span>, j));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i == j)&#123;</span><br><span class="line">		<span class="keyword">if</span>((str[i] == <span class="string">'['</span>) || (str[i] == <span class="string">']'</span>))<span class="built_in">printf</span>(<span class="string">"[]"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"()"</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(((str[i] == <span class="string">'['</span>) &amp;&amp; (str[j] == <span class="string">']'</span>)) || ((str[i] == <span class="string">'('</span>) &amp;&amp; (str[j] == <span class="string">')'</span>)))&#123;</span><br><span class="line">		<span class="keyword">if</span>(i == j - <span class="number">1</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(str[i] == <span class="string">'['</span>)<span class="built_in">printf</span>(<span class="string">"[]"</span>);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"()"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(dp[i][j] == dp[i + <span class="number">1</span>][j - <span class="number">1</span>])&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%c"</span>, str[i]);</span><br><span class="line">			print(i + <span class="number">1</span>, j - <span class="number">1</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%c"</span>, str[j]);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; j; ++k)&#123;</span><br><span class="line">		<span class="keyword">if</span>(dp[i][j] == dp[i][k] + dp[k + <span class="number">1</span>][j])&#123;</span><br><span class="line">			print(i, k);</span><br><span class="line">			print(k + <span class="number">1</span>, j);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//freopen("output.txt", "w", stdout);</span></span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	fgets(str, maxn, <span class="built_in">stdin</span>);</span><br><span class="line">	<span class="built_in">sscanf</span>(str, <span class="string">"%d"</span>, &amp;t);</span><br><span class="line">	<span class="keyword">while</span>(t)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		fgets(str, maxn, <span class="built_in">stdin</span>);</span><br><span class="line">		fgets(str, maxn, <span class="built_in">stdin</span>);</span><br><span class="line">		str[<span class="built_in">strlen</span>(str) - <span class="number">1</span>] = <span class="string">'\0'</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">strlen</span>(str))&#123;</span><br><span class="line">			<span class="keyword">int</span> ret = cal(<span class="number">0</span>, <span class="built_in">strlen</span>(str) - <span class="number">1</span>);</span><br><span class="line">			<span class="comment">//printf("%d\n", ret);</span></span><br><span class="line">			print(<span class="number">0</span>, <span class="built_in">strlen</span>(str) - <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">		<span class="keyword">if</span>(--t)<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="备注-1"><a href="#备注-1" class="headerlink" title="备注"></a>备注</h3><p>不要忘记空串的处理。</p>
<h1 id="UVa1331-最优三角剖分"><a href="#UVa1331-最优三角剖分" class="headerlink" title="UVa1331_最优三角剖分"></a>UVa1331_最优三角剖分</h1><h2 id="题意-7"><a href="#题意-7" class="headerlink" title="题意"></a>题意</h2><p>给出一组多边形，要求使用多边形的对角线将其划分为一堆三角形，记这堆三角形里面面积最大的一个面积为s。显然有多种划分的方法，要求求出所有划分方法中能得到的最小的s值。</p>
<h2 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h2><p>设<code>dp[i][j]</code>为点i到点j顺序围成的多边形中，最大的剖分三角形的面积。在这个多边形中，不论怎么划分，必定有一个顶点k和i，j组成一个三角形，那么我们遍历其他顶点，和点i，j组成三角形，有：</p>
<p><code>dp[i][j] = min(dp[i][j],min(s(i,j,k),dp[i][k]+dp[k][j]))</code></p>
<p>其中s是指i，j，k三点围成的三角形面积。</p>
<p>特殊地，k是i+1的时候不计算<code>dp[i][k]</code>，k是j-1的时候同理。</p>
<p>如果j=i+2，那么<code>dp[i][j]=s(i,i+1,j)</code></p>
<p>但问题是，有时候i，j，k三点并不合法。</p>
<p>因为，有时候，某条对角线不在多边形的范围内，或者某条对角线可能和某条边交叉了。这些都不行。</p>
<p>所以，我们可以预先处理一下对角线，对每条对角线，我们判定一下它是否合法。</p>
<p>判定对角线i，j合法的方法是：</p>
<p>1、对角线i，j在角i，角j的范围内。</p>
<p>这里需要使用向量外积和三角函数。首先，需要计算所有的内角大小。计算内角大小不能用余弦定理，因为多边形的内角可能会超过180度。我们可以用计算向量偏转角的方式来得到。然后，根据向量外积，首先排除对角线和边重合的，即外积是0，向量的分量符号一致。如果对角线和两条边的外积同号，说明对角线在下图的2,3区域，否则就在1,4区域。</p>
<p><img src="/images/算法题整理——动态规划/3.png" alt></p>
<p>这样，我们首先看内角是不是小于180度，如果是，则外积同号，并且对角线和两边夹角之和等于内角，合法，否则不合法。若大于180度，则外积同号的必然合法，异号的，同样是对角线和两边夹角之和等于内角才行。</p>
<p>2、对角线和任何一条边都不相交</p>
<p>线段相交的判定可以这样去进行，求出线段所属直线的解析式，然后判定线段的两端点是否在对方直线的两侧即可。</p>
<h2 id="解决-11"><a href="#解决-11" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pi 3.14159265358979323846264</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> inf = <span class="number">10000000000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eta = <span class="number">0.0000001</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">double</span> x[maxm], y[maxm];</span><br><span class="line"><span class="keyword">double</span> d[maxm][maxm];</span><br><span class="line"><span class="keyword">double</span> the[maxm];</span><br><span class="line"><span class="keyword">int</span> v[maxm][maxm];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">ag</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> x0 = x[o];</span><br><span class="line">	<span class="keyword">double</span> y0 = y[o];</span><br><span class="line">	<span class="keyword">double</span> x1 = x[a];</span><br><span class="line">	<span class="keyword">double</span> y1 = y[a];</span><br><span class="line">	<span class="keyword">double</span> x2 = x[b];</span><br><span class="line">	<span class="keyword">double</span> y2 = y[b];</span><br><span class="line">			</span><br><span class="line">	<span class="keyword">double</span> da = <span class="built_in">sqrt</span>((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));</span><br><span class="line">	<span class="keyword">double</span> cosa = (x1 - x0) / da;</span><br><span class="line">	<span class="keyword">double</span> sina = (y1 - y0) / da;</span><br><span class="line">			</span><br><span class="line">	<span class="keyword">double</span> db = <span class="built_in">sqrt</span>((x2 - x0) * (x2 - x0) + (y2 - y0) * (y2 - y0));</span><br><span class="line">	<span class="keyword">double</span> cosb = (x2 - x0) / db;</span><br><span class="line">	<span class="keyword">double</span> sinb = (y2 - y0) / db;</span><br><span class="line">			</span><br><span class="line">	<span class="keyword">double</span> cosi = cosb * cosa + sinb * sina;</span><br><span class="line">	<span class="keyword">double</span> sini = sinb * cosa - sina * cosb;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">double</span> ret;	</span><br><span class="line">	<span class="keyword">if</span>(sini &gt;= <span class="number">0</span>)ret = <span class="built_in">acos</span>(cosi);</span><br><span class="line">	<span class="keyword">else</span> ret = <span class="number">2</span> * pi - <span class="built_in">acos</span>(cosi);</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">absag</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> ret = ag(o, a, b);</span><br><span class="line">	<span class="keyword">if</span>(ret &gt; pi)ret = <span class="number">2</span> * pi - ret;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">s</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> x1 = x[i] - x[k];</span><br><span class="line">	<span class="keyword">double</span> x2 = x[j] - x[k];</span><br><span class="line">	<span class="keyword">double</span> y1 = y[i] - y[k];</span><br><span class="line">	<span class="keyword">double</span> y2 = y[j] - y[k];</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">fabs</span>(x1 * y2 - x2 * y1)/ <span class="number">2.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cross</span><span class="params">(<span class="keyword">double</span> x1, <span class="keyword">double</span> y1, <span class="keyword">double</span> x2, <span class="keyword">double</span> y2, <span class="keyword">double</span> x3, <span class="keyword">double</span> y3, <span class="keyword">double</span> x4, <span class="keyword">double</span> y4)</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> A1, B1, C1;</span><br><span class="line">	<span class="keyword">if</span>((x1 - x2 &lt; eta) &amp;&amp; (-eta &lt; x1 - x2))&#123;</span><br><span class="line">		A1 = <span class="number">1</span>;</span><br><span class="line">		B1 = <span class="number">0</span>;</span><br><span class="line">		C1 = -x1;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>((y1 - y2 &lt; eta) &amp;&amp; (-eta &lt; y1 - y2))&#123;</span><br><span class="line">		A1 = <span class="number">0</span>;</span><br><span class="line">		B1 = <span class="number">1</span>;</span><br><span class="line">		C1 = -y1;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">double</span> k = (y1 - y2) / (x1 - x2);</span><br><span class="line">		A1 = -k;</span><br><span class="line">		B1 = <span class="number">1</span>;</span><br><span class="line">		C1 = k * x1 - y1;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">double</span> A2, B2, C2;</span><br><span class="line">	<span class="keyword">if</span>((x3 - x4 &lt; eta) &amp;&amp; (-eta &lt; x3 - x4))&#123;</span><br><span class="line">		A2 = <span class="number">1</span>;</span><br><span class="line">		B2 = <span class="number">0</span>;</span><br><span class="line">		C2 = -x3;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>((y3 - y4 &lt; eta) &amp;&amp; (-eta &lt; y3 - y4))&#123;</span><br><span class="line">		A2 = <span class="number">0</span>;</span><br><span class="line">		B2 = <span class="number">1</span>;</span><br><span class="line">		C2 = -y3;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">double</span> k = (y3 - y4) / (x3 - x4);</span><br><span class="line">		A2 = -k;</span><br><span class="line">		B2 = <span class="number">1</span>;</span><br><span class="line">		C2 = k * x3 - y3;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> ((A1 * x3 + B1 * y3 + C1) * (A1 * x4 + B1 * y4 + C1) &lt; <span class="number">0</span>) &amp;&amp; ((A2 * x1 + B2 * y1 + C2) * (A2 * x2 + B2 * y2 + C2) &lt; <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">inag</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> x1 = x[(i + <span class="number">1</span>) % m] - x[i];</span><br><span class="line">	<span class="keyword">double</span> y1 = y[(i + <span class="number">1</span>) % m] - y[i];</span><br><span class="line">	<span class="keyword">double</span> x2 = x[(i + m - <span class="number">1</span>) % m] - x[i];</span><br><span class="line">	<span class="keyword">double</span> y2 = y[(i + m - <span class="number">1</span>) % m] - y[i];</span><br><span class="line">	<span class="keyword">double</span> x0 = x[j] - x[i];</span><br><span class="line">	<span class="keyword">double</span> y0 = y[j] - y[i];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">double</span> ret1 = (x1 * y2 - x2 * y1);</span><br><span class="line">	<span class="keyword">double</span> ret2 = (x1 * y0 - x0 * y1);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">fabs</span>(ret2) &lt; eta)&#123;</span><br><span class="line">		<span class="keyword">if</span>((x1 * x0 &gt; <span class="number">0</span>) &amp;&amp; (y1 * y0 &gt; <span class="number">0</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">double</span> flag1 = ret1 * ret2;</span><br><span class="line">	</span><br><span class="line">	ret1 = (x2 * y1 - x1 * y2);</span><br><span class="line">	ret2 = (x2 * y0 - x0 * y2);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">fabs</span>(ret2) &lt; eta)&#123;</span><br><span class="line">		<span class="keyword">if</span>((x2 * x0 &gt; <span class="number">0</span>) &amp;&amp; (y2 * y0 &gt; <span class="number">0</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">double</span> flag2 = ret1 * ret2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(the[i] &lt; pi)&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag1 * flag2 &lt; <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">double</span> the1 = absag(i, (i + <span class="number">1</span>) % m, j);</span><br><span class="line">		<span class="keyword">double</span> the2 = absag(i, (i + m - <span class="number">1</span>) % m, j);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">fabs</span>(the1 + the2 - the[i]) &gt; eta)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag1 * flag2 &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">double</span> the1 = absag(i, (i + <span class="number">1</span>) % m, j);</span><br><span class="line">			<span class="keyword">double</span> the2 = absag(i, (i + m - <span class="number">1</span>) % m, j);</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">fabs</span>(the1 + the2 - the[i]) &gt; eta)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	x0 = -x0;</span><br><span class="line">	y0 = -y0;</span><br><span class="line">	x1 = x[(j + <span class="number">1</span>) % m] - x[j];</span><br><span class="line">	y1 = y[(j + <span class="number">1</span>) % m] - y[j];</span><br><span class="line">	x2 = x[(j + m - <span class="number">1</span>) % m] - x[j];</span><br><span class="line">	y2 = y[(j + m - <span class="number">1</span>) % m] - y[j];</span><br><span class="line">	</span><br><span class="line">	ret1 = (x1 * y2 - x2 * y1);</span><br><span class="line">	ret2 = (x1 * y0 - x0 * y1);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">fabs</span>(ret2) &lt; eta)&#123;</span><br><span class="line">		<span class="keyword">if</span>((x1 * x0 &gt; <span class="number">0</span>) &amp;&amp; (y1 * y0 &gt; <span class="number">0</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	flag1 = ret1 * ret2;</span><br><span class="line">	</span><br><span class="line">	ret1 = (x2 * y1 - x1 * y2);</span><br><span class="line">	ret2 = (x2 * y0 - x0 * y2);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">fabs</span>(ret2) &lt; eta)&#123;</span><br><span class="line">		<span class="keyword">if</span>((x2 * x0 &gt; <span class="number">0</span>) &amp;&amp; (y2 * y0 &gt; <span class="number">0</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	flag2 = ret1 * ret2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(the[j] &lt; pi)&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag1 * flag2 &lt; <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">double</span> the1 = absag(j, (j + <span class="number">1</span>) % m, i);</span><br><span class="line">		<span class="keyword">double</span> the2 = absag(j, (j + m - <span class="number">1</span>) % m, i);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">fabs</span>(the1 + the2 - the[j]) &gt; eta)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag1 * flag2 &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">double</span> the1 = absag(j, (j + <span class="number">1</span>) % m, i);</span><br><span class="line">			<span class="keyword">double</span> the2 = absag(j, (j + m - <span class="number">1</span>) % m, i);</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">fabs</span>(the1 + the2 - the[j]) &gt; eta)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initv</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">		the[i] = ag(i, (i + <span class="number">1</span>) % m, (i + m - <span class="number">1</span>) % m);</span><br><span class="line">		sum += the[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sum &gt; pi * m)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">			the[i] = <span class="number">2</span> * pi - the[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(v, <span class="number">0</span>, <span class="keyword">sizeof</span>(v));</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; m; ++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>(j == (i + <span class="number">1</span>) % m)v[i][j] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(i == (j + <span class="number">1</span>) % m)v[i][j] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">int</span> flag = inag(i, j);</span><br><span class="line">				<span class="keyword">if</span>(flag)&#123;</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; m; ++k)&#123;</span><br><span class="line">						<span class="keyword">int</span> v = k;</span><br><span class="line">						<span class="keyword">int</span> w = (k + <span class="number">1</span>) % m;</span><br><span class="line">						<span class="keyword">if</span>(v == i)<span class="keyword">continue</span>;</span><br><span class="line">						<span class="keyword">else</span> <span class="keyword">if</span>(v == j)<span class="keyword">continue</span>;</span><br><span class="line">						<span class="keyword">else</span> <span class="keyword">if</span>(w == i)<span class="keyword">continue</span>;</span><br><span class="line">						<span class="keyword">else</span> <span class="keyword">if</span>(w == j)<span class="keyword">continue</span>;</span><br><span class="line">						<span class="keyword">else</span>&#123;</span><br><span class="line">							<span class="keyword">if</span>(cross(x[i], y[i], x[j], y[j], x[v], y[v], x[w], y[w]))&#123;</span><br><span class="line">								flag = <span class="number">0</span>;</span><br><span class="line">								<span class="keyword">break</span>;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;	</span><br><span class="line">				&#125;</span><br><span class="line">				v[i][j] = flag;</span><br><span class="line">			&#125;</span><br><span class="line">			v[j][i] = v[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> v[i][j] &amp;&amp; v[i][k] &amp;&amp; v[j][k];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(d[i][j] != <span class="number">0</span>)<span class="keyword">return</span> d[i][j];</span><br><span class="line">	<span class="keyword">if</span>(i + <span class="number">2</span> == j)&#123;</span><br><span class="line">		<span class="keyword">return</span> d[i][j] = s(i, i + <span class="number">1</span>, j);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		d[i][j] = inf;</span><br><span class="line">		<span class="keyword">if</span>(check(i, j, i + <span class="number">1</span>))&#123;</span><br><span class="line">			d[i][j] = min(d[i][j], max(s(i, j, i + <span class="number">1</span>), cal(i + <span class="number">1</span>, j)));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(check(i, j, j - <span class="number">1</span>))&#123;</span><br><span class="line">			d[i][j] = min(d[i][j], max(s(i, j, j - <span class="number">1</span>), cal(i, j - <span class="number">1</span>)));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> k = i + <span class="number">2</span>; k &lt; j - <span class="number">1</span>; ++k)&#123;</span><br><span class="line">			<span class="keyword">if</span>(check(i, j, k))&#123;</span><br><span class="line">				d[i][j] = min(d[i][j], max(max(cal(i, k), cal(k, j)), s(i, j, k)));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> d[i][j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="keyword">while</span>(n--)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">		<span class="built_in">memset</span>(d, <span class="number">0</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%lf %lf"</span>, &amp;x[i], &amp;y[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		initv();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%.1lf\n"</span>, cal(<span class="number">0</span>, m - <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="备注-2"><a href="#备注-2" class="headerlink" title="备注"></a>备注</h3><p>这道题我写了两个下午两个晚上，在这里简单地记录一下当时的思路和心路过程。</p>
<p>刚刚拿到这道题的时候，由于刚刚做完切木棍（UVa10003），马上就意识到这道题和那道题的思路一样，都是设<code>dp[i][j]</code>为从i点到j点切割的最小值，然后从中任意切出一个三角形。实际上这个思路大致是对的，只不过有一个问题，就是这道题的状态是多边形，是一个环形，不像木棍题一样有两端，例如有六个点的多边形（点的编号为0~5），我切掉顶点是1,2,4的三角形，剩下的四边形部分顶点依次为0,1,4,5，是没办法用上面的数组表示的。</p>
<p>为了修补这个思路，我草草地画了几个图，发现在做三角剖分的时候，似乎总能从一个角开始砍起，然后再砍掉其相邻的角，一个一个地砍。我称其为锯角法，因为就像小时候常常遇到的脑筋急转弯“锯掉一个桌子的角还有几个角”。</p>
<p>锯角法的具体做法是：首先锯掉任意一个角，这样，破坏了原来多边形的“环”。比如六边形，一开始对于任意的角i，总有（i + 1）% m是它的后继，即相邻的角，等我锯掉一个之后，比如锯掉2，那么1的后继就变成了3，为此，我记这种状态为<code>dp[3][1]</code>，没有前驱的角放在最前面，没有后继的放在最后面。再继续转移时，就不能任意锯掉一个角了。</p>
<p>这样，对于状态<code>dp[i][j]</code>我要么砍掉i角，要么砍掉j角，就避免了产生顶点不连续的多边形导致状态无法表示的问题。产生的状态要么是<code>dp[(i+1)%m][j]</code>要么是<code>dp[i][(j-1+m)%m]</code>，这样，保证了断开的环永远只有一处，不会出现状态无法表示的情况。</p>
<p>结果样例都没过。</p>
<p>仔细分析了一下发现，如果多边形有超过180度的内角，便不能锯掉这个角了，这里我并没有往深入想，而是觉得简单——把多边形的内角计算出来，同时计算<code>dp[i][j]</code>的时候，要注意这时i和j两个角的度数已经发生变化了，所以每次计算都维护一下就好了。</p>
<p>为了实现这个想法，我差不多花了一下午的时间。计算多边形的内角对我来说实在不算容易，最主要的问题就是“何为内角”，如果用余弦公式去算的话，只能计算出小于180度的角，怎么区分谁在内部谁在外部呢？最终我用的方法是这样的，把每个边当成向量，然后算出这个边和坐标x轴的夹角正弦余弦，用差角公式算出来两个向量的夹角。再检查最终内角和是不是符合多边形内角和规则，如果不符合则每个角取2π-计算值。</p>
<p>这样倒是过了样例，问题是有时候小于180度的角也不能去掉，比如下图的i角。</p>
<p><img src="/images/算法题整理——动态规划/4.png" alt></p>
<p>于是又陷入僵局，遂又加上了判断线段不能相交的条件，可又遇到了下图</p>
<p><img src="/images/算法题整理——动态规划/5.png" alt></p>
<p>于是又改成了最终版本的判断对角线合不合法。结果发现，一个一个地锯掉角是不行的，比如这个六边形就不能按照锯掉一个角，再锯掉相邻角的办法遍历所有解。</p>
<p><img src="/images/算法题整理——动态规划/6.png" alt></p>
<p>后来不得已，重新思考了下，才改成了最终递推的方法。</p>
<p>最近看艺术鉴赏课程，提到米开朗琪罗画西斯廷天顶画的故事，其中有一个片段很有意思。说米开朗琪罗对自己的作品十分认真，他常常为了构思人物的形象，整整一天，一动不动地站在架子上，一笔也不画。这种情形被居心叵测的人看到之后告诉了教皇，教皇质问米开朗琪罗为什么偷懒，这位大师回答说——一个画家最认真工作的时候就是不画的时候。</p>
<p>为什么想起这个故事呢，因为在写这道最优三角剖分的时候，我草率了。往往是刚刚有一个大致的思路就开始敲打，结果是可想而知的，要么写到一半就发现了错误，自相矛盾；要么写到最后提交判错，再苦苦debug，然后推翻了之前的一切重来。这道题得出的经验教训，如果用米开朗琪罗的话说，就是——一个程序员最认真工作的时候就是他什么都不敲的时候。对于程序设计者而言，没有明确自己要做什么，要怎么做，而只是模模糊糊，隐隐约约觉得应该怎么做的时候，千万不要写程序，否则就是自讨苦头。</p>
<h1 id="UVa12099-书架"><a href="#UVa12099-书架" class="headerlink" title="UVa12099_书架"></a>UVa12099_书架</h1><h2 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h2><p>给出n本书，每本书有其高度和厚度，分别为hi，ti，现在，要把这些书放进一个三层的书架里，每一层书架可以有不同的高度，但只能有一样的宽度。如果一些书能够被放进该书架的某一层，意味着这层书架的高度至少应该大于这些书的最大高度，并且书架的总宽度应该不小于书的总厚度，本题要求求出该书架的最小体积。</p>
<p>每本书都要被放进书架里，并且书架的三层都要有书，不能有一层空着。</p>
<h2 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h2><p>3 &lt;= n &lt;= 70，150 &lt;= h &lt;= 300，5 &lt;= t &lt;= 30</p>
<h2 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h2><p>通过审题我们知道，书架每一层的高度取决于这层最高的那本书，而厚度则取决于每层厚度总和的最大值。</p>
<p>我们采用0-1背包问题的思路，每本书有三个选择，我们需要记录的东西有已经放进书架的书的下标，为了计算体积，我们还需要知道三层的厚度，三层的高度。</p>
<p>这样，每当从一个已知的状态放入一本新书转移到一个新状态时，我们可以考虑把书放进书架的任意一层，更新该层厚度，并且如果这本书的高度大于这一层的，还需要更新该层的高度。</p>
<p>显然，这样做需要记录的东西太多了，状态数会达到<code>n * h * h * h * t * t * t</code>那么多。</p>
<p>为了尽量减少需要记录的数据，我们不妨按照高度从大到小的顺序，先考虑较高的书，这样，当某一层书架已经有书了，就不需要再考虑之后再放进去的书的高度了。</p>
<p>这样，我们似乎只需要记录每一层第一个放进去的书的高度就够了。但这样还不够好，因为状态数没有丝毫的减少，我们可以考虑一下为什么记录每层的高度，从最终计算体积的方向来说，我们只需要知道三层的总高度就可以了，之前记录每层的高度以备后来的书会超过它，但现在这个问题已经没有了，所以我们只需要知道三层的总高度就够了。</p>
<p>厚度方面，我们知道，对于已经放进前i本书的状态来说，三层书架的总厚度之和一定等于前i本书的总厚度，所以我们只需要知道任意两层书架的总厚度就足够了，为了方便计算，可以预先算好书籍厚度的前缀和。</p>
<p>这样，我们假设<code>d[i][j][k]</code>表示前i本书放入书架，第二层的宽度为j，第三层的宽度为k的状态下书架高度的最小值。</p>
<p>使用刷表法，对第i本书，找到所有存在的<code>d[i-1][j][k]</code>状态，有：</p>
<p><code>如果j不为0：d[i][book[i].w][k] = min(d[i][book[i].w][k], d[i-1][j][k] + book[i].h)</code></p>
<p><code>如果j为0：d[i][j + book[i].w][k] = min(d[i][j + book[i].w][k], d[i-1][j][k])</code></p>
<p><code>如果k不为0：d[i][j][book[i].w] = min(d[i][j][book[i].w], d[i-1][j][k] + book[i].h)</code></p>
<p><code>如果k为0：d[i][j][k + book[i].w] = min(d[i][j][k + book[i].w], d[i-1][j][k])</code></p>
<p>到这里，由于每次找到存在的状态都需要遍历数组的二三维下标，它们的最大值是<code>n*w</code>，加上样例数c = 20，所以时间复杂度会达到<code>O(c * n * n * w * n * w)</code>，需要优化一下才能过。</p>
<p>这里采用的优化方式也比较简单，因为二三维下标表示书籍总厚度，所以在寻找已经放置了i本书的状态时，厚度和肯定不会超过前i本书的总厚度和，这样就可以通过本题的时间要求了。</p>
<h2 id="解决-12"><a href="#解决-12" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">70</span> + <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> W = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">int</span> sum[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">book</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> h, w;</span><br><span class="line">&#125;books[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> d[N][N * W][N * W];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(book b1, book b2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> b1.h &gt; b2.h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//reset the array.</span></span><br><span class="line">	<span class="built_in">memset</span>(d, <span class="number">0x7f</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">	<span class="comment">//put the first book at the first layer.</span></span><br><span class="line">	d[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = books[<span class="number">0</span>].h;</span><br><span class="line">	<span class="keyword">int</span> m = n * W;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sum[i]; ++j)&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k + j &lt; sum[i]; ++k)&#123;</span><br><span class="line">				<span class="keyword">if</span>(d[i - <span class="number">1</span>][j][k] != <span class="number">0x7f7f7f7f</span>)&#123;</span><br><span class="line">					<span class="comment">//put the book at the first layer.</span></span><br><span class="line">					d[i][j][k] = min(d[i][j][k], d[i - <span class="number">1</span>][j][k]);</span><br><span class="line">					<span class="comment">//put the book at the second layer.</span></span><br><span class="line">						<span class="comment">//if the second layer is empty, add the height of this book.</span></span><br><span class="line">						<span class="comment">//and then just continue;</span></span><br><span class="line">					<span class="keyword">if</span>(j == <span class="number">0</span>)&#123;</span><br><span class="line">						d[i][books[i].w][k] = min(d[i][books[i].w][k], d[i - <span class="number">1</span>][j][k] + books[i].h);</span><br><span class="line">						<span class="keyword">continue</span>;</span><br><span class="line">					&#125;	<span class="comment">//if the second layer is not empty, use the height of last condition.</span></span><br><span class="line">					<span class="keyword">else</span> d[i][j + books[i].w][k] = min(d[i][j + books[i].w][k], d[i - <span class="number">1</span>][j][k]);</span><br><span class="line">					<span class="comment">//put the book at the third layer.</span></span><br><span class="line">						<span class="comment">//if the third layer is empty, add the height of this book.</span></span><br><span class="line">					<span class="keyword">if</span>(k == <span class="number">0</span>)&#123;</span><br><span class="line">						d[i][j][books[i].w] = min(d[i][j][books[i].w], d[i - <span class="number">1</span>][j][k] + books[i].h);</span><br><span class="line">					&#125;	<span class="comment">//if the third layer is not empty, use the height of last condition.</span></span><br><span class="line">					<span class="keyword">else</span> d[i][j][k + books[i].w] = min(d[i][j][k + books[i].w], d[i - <span class="number">1</span>][j][k]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ret = <span class="number">0x7fffffff</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sum[n - <span class="number">1</span>]; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; i + j &lt; sum[n - <span class="number">1</span>]; ++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>((d[n - <span class="number">1</span>][i][j] != <span class="number">0x7f7f7f7f</span>) &amp;&amp; i &amp;&amp; j)&#123;</span><br><span class="line">				<span class="comment">//find the max weight of this condition.</span></span><br><span class="line">				<span class="keyword">int</span> temp = max(i, j);</span><br><span class="line">				temp = max(temp, sum[n - <span class="number">1</span>] - i - j);</span><br><span class="line">				ret = min(ret, temp * d[n - <span class="number">1</span>][i][j]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//print the result.</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ret);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">	<span class="keyword">while</span>(t--)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;books[i].h, &amp;books[i].w);</span><br><span class="line">		&#125;</span><br><span class="line">		sort(books, books + n, cmp);</span><br><span class="line">		sum[<span class="number">0</span>] = books[<span class="number">0</span>].w;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">			sum[i] = sum[i - <span class="number">1</span>] + books[i].w;</span><br><span class="line">		&#125;</span><br><span class="line">		cal();</span><br><span class="line">		print();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa12186-工人的请愿书"><a href="#UVa12186-工人的请愿书" class="headerlink" title="UVa12186_工人的请愿书"></a>UVa12186_工人的请愿书</h1><h2 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h2><p>一个企业里有n名员工和一个老板，这个企业的管理模式是树形的，即每个员工都有且只有一个直接上司。有一天，工人们（没有直接下属的员工）打算签署一份请愿书交给老板，但是他们只能把请愿书交给自己的直接上司来转交。如果某个上司发现，超过T%的自己的直接下属已经签署了这份请愿书，那么他也会签署这份请愿书并继续交给自己的直接上司。同样，如果最终老板收到了请愿书，并且发现自己的直接下属超过T%都签署了名字，他就会通过这份请愿书。</p>
<p>求让这份请愿书通过需要签署请愿书的最少工人数。</p>
<h2 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h2><p>设<code>dp[i]</code>为让员工i收到请愿书并且签字所需要签名的最小工人数。</p>
<p>如果某个员工i收到请愿书并签字，那么需要有至少k个他的直接下属已经收到请愿书并且签字了：</p>
<p><code>k = [i的下属人数 * T%]（这里的[]表示向上取整）</code></p>
<p>那么：</p>
<p><code>dp[i] = Σ(dp[j])|j是dp值最小的k个i的下属</code></p>
<h2 id="解决-13"><a href="#解决-13" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n, t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> d[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initialization</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(d, <span class="number">0</span>, <span class="keyword">sizeof</span>(d));</span><br><span class="line">	fill(v, v + maxn, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> m)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = v[m].size();</span><br><span class="line">	<span class="keyword">if</span>(num)&#123;</span><br><span class="line">		<span class="keyword">int</span> k = num * t + <span class="number">99</span>;</span><br><span class="line">		k /= <span class="number">100</span>;</span><br><span class="line">		priority_queue&lt; <span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt; subdp;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)&#123;</span><br><span class="line">			dfs(v[m][i]);</span><br><span class="line">			subdp.push(d[v[m][i]]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i)&#123;</span><br><span class="line">			d[m] += subdp.top();</span><br><span class="line">			subdp.pop();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		++d[m];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;t);</span><br><span class="line">	<span class="keyword">while</span>(n || t)&#123;</span><br><span class="line">		initialization();</span><br><span class="line">		<span class="keyword">int</span> temp;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;temp);</span><br><span class="line">			v[temp].push_back(i + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		dfs(<span class="number">0</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, d[<span class="number">0</span>]);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;t);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><h4 id="向上取整"><a href="#向上取整" class="headerlink" title="向上取整"></a>向上取整</h4><p>k = num * t + 99</p>
<h4 id="工人的dp值"><a href="#工人的dp值" class="headerlink" title="工人的dp值"></a>工人的dp值</h4><p>工人的dp值直接是1。</p>
<h1 id="UVa1220-Hali-Bula的晚会"><a href="#UVa1220-Hali-Bula的晚会" class="headerlink" title="UVa1220_Hali-Bula的晚会"></a>UVa1220_Hali-Bula的晚会</h1><h2 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h2><p>公司里面有n(n &lt; 201)个人，他们的上下级关系成树形结构，即除了老板之外其他的每个人都有且仅有一个直接上司。现在要选出尽量多的人并且不能同时选有直接上下级关系的人来参加一个晚会，问最多能选多少人，并且是不是唯一选法。</p>
<h2 id="分析-10"><a href="#分析-10" class="headerlink" title="分析"></a>分析</h2><p>设<code>dp[i][0]</code>是i不来的情况下，以i为根的子树里面最多能来的人数。而<code>dp[i][1]</code>为i必来的情况下，以i为根的子树里面最多能来的人数。</p>
<p><code>dp[i][0] = Σ(max(dp[j][0], dp[j][1]))</code></p>
<p><code>dp[i][1] = Σ(dp[j][0])</code></p>
<p>j为所有i的子节点。</p>
<p>至于是否唯一选法，可以在得出dp值之后去搜索是否有其他选法。设unique函数，unique(i,j)为搜索i结点为子树，并且选择i结点（如果j是0，表示不选）的情况下是否解是唯一的。</p>
<p>如果j是0，表示i点不选，这时要看每个子节点j的<code>dp[j][0], dp[j][1]</code>值是否相等，若是，则说明有多解，否则搜索每个子结点的情况。</p>
<p>如果j是1，直接搜索每个子结点不选的情况。</p>
<h2 id="解决-14"><a href="#解决-14" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> input[maxn][<span class="number">2</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[maxn];</span><br><span class="line"><span class="built_in">string</span> boss;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initialization</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fill(v, v + maxn, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;&#125;);</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">	dp[b][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator i = v[b].begin(); i !=v[b].end(); ++i)&#123;</span><br><span class="line">		dfs(*i);</span><br><span class="line">		dp[b][<span class="number">0</span>] += max(dp[*i][<span class="number">1</span>], dp[*i][<span class="number">0</span>]);</span><br><span class="line">		dp[b][<span class="number">1</span>] += dp[*i][<span class="number">0</span>];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">unique</span><span class="params">(<span class="keyword">int</span> b, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(k == <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator i = v[b].begin(); i !=v[b].end(); ++i)&#123;</span><br><span class="line">			<span class="keyword">if</span>(dp[*i][<span class="number">0</span>] == dp[*i][<span class="number">1</span>])<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(dp[*i][<span class="number">0</span>] &gt; dp[*i][<span class="number">1</span>])&#123;</span><br><span class="line">				<span class="keyword">if</span>(unique(*i, <span class="number">0</span>) == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(unique(*i, <span class="number">1</span>) == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator i = v[b].begin(); i !=v[b].end(); ++i)&#123;</span><br><span class="line">			<span class="keyword">if</span>(unique(*i, <span class="number">0</span>) == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	<span class="keyword">while</span>(n)&#123;</span><br><span class="line">		initialization();</span><br><span class="line">		<span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; s;</span><br><span class="line">		<span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; m;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; boss;</span><br><span class="line">		s.insert(boss);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; input[i][<span class="number">0</span>] &gt;&gt; input[i][<span class="number">1</span>];</span><br><span class="line">			s.insert(input[i][<span class="number">0</span>]);</span><br><span class="line">			s.insert(input[i][<span class="number">1</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> con = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;::iterator i = s.begin(); i != s.end(); ++i)&#123;</span><br><span class="line">			m.insert(pair&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;(*i, con++));	</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">			v[m[input[i][<span class="number">1</span>]]].push_back(m[input[i][<span class="number">0</span>]]);</span><br><span class="line">		&#125;</span><br><span class="line">		dfs(m[boss]);</span><br><span class="line">		<span class="keyword">if</span>(dp[m[boss]][<span class="number">0</span>] &gt; dp[m[boss]][<span class="number">1</span>])&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt; dp[m[boss]][<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">if</span>(unique(m[boss], <span class="number">0</span>))&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">" Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">" No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(dp[m[boss]][<span class="number">0</span>] &lt; dp[m[boss]][<span class="number">1</span>])&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt; dp[m[boss]][<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">if</span>(unique(m[boss], <span class="number">1</span>))&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">" Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">" No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt; dp[m[boss]][<span class="number">0</span>] &lt;&lt; <span class="string">" No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UVa1218-完美的服务"><a href="#UVa1218-完美的服务" class="headerlink" title="UVa1218_完美的服务"></a>UVa1218_完美的服务</h1><h2 id="描述-13"><a href="#描述-13" class="headerlink" title="描述"></a>描述</h2><p>有n(n&lt;10001)台机器组成一个树形结构，现在要求在一些机器上安置服务器，使得每一台普通机器都能恰好直接与一台服务器相邻，求服务器的最少数量。</p>
<h2 id="分析-11"><a href="#分析-11" class="headerlink" title="分析"></a>分析</h2><p>任取一点作为树根，将该图转化为有根的树之后，设</p>
<p><code>dp[i][0]</code>表示i点的父节点为普通机器，i点也是普通机器，以i点为根节点的子树上最少服务器数。</p>
<p><code>dp[i][1]</code>表示i点为服务器，以i点为根节点的子树上最少服务器数。</p>
<p><code>dp[i][2]</code>表示i点的父节点为服务器，i点也是普通机器，以i点为根节点的子树上最少服务器数。</p>
<p>有：</p>
<p><code>dp[i][0] = Σ(dp[j][0]) + min(dp[j][1] - dp[j][0])</code></p>
<p><code>dp[i][1] = 1 + Σ(max(dp[j][1], dp[j][2]))</code></p>
<p><code>dp[i][2] = Σ(dp[j][0])</code></p>
<p>其中j是i的子节点。</p>
<p>但是这样的问题是，对于有些靠着叶节点的子树来说，某些情况可能是不存在的。所以笔者采用了刷表法，从叶节点开始更新其父节点。</p>
<p>用-1来表示某种情况不存在。</p>
<h2 id="解决-15"><a href="#解决-15" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10000</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[N][<span class="number">3</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[N];</span><br><span class="line"><span class="keyword">int</span> visit[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; leaf;</span><br><span class="line"><span class="keyword">int</span> con[N];</span><br><span class="line"><span class="keyword">int</span> minchild[N];</span><br><span class="line"><span class="keyword">int</span> hasinqueue[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initialization</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">memset</span>(con, <span class="number">0</span>, <span class="keyword">sizeof</span>(con));</span><br><span class="line">	<span class="built_in">memset</span>(visit, <span class="number">0</span>, <span class="keyword">sizeof</span>(visit));</span><br><span class="line">	<span class="built_in">memset</span>(minchild, <span class="number">0x7f</span>, <span class="keyword">sizeof</span>(minchild));</span><br><span class="line">	<span class="built_in">memset</span>(hasinqueue, <span class="number">0</span>, <span class="keyword">sizeof</span>(hasinqueue));</span><br><span class="line">	fill(v, v + N, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;&#125;);</span><br><span class="line">	<span class="keyword">while</span>(!leaf.empty())leaf.pop();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findleaf</span><span class="params">(<span class="keyword">int</span> father)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator i = v[father].begin(); i != v[father].end(); ++i)&#123;</span><br><span class="line">		<span class="keyword">if</span>(visit[*i] == <span class="number">0</span>)&#123;</span><br><span class="line">			++hasinqueue[father];</span><br><span class="line">			visit[*i] = <span class="number">1</span>;</span><br><span class="line">			findleaf(*i);</span><br><span class="line">			flag = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(flag)&#123;</span><br><span class="line">		leaf.push(father);</span><br><span class="line">		dp[father][<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">		dp[father][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">		dp[father][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">		con[father] = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ret;</span><br><span class="line">	<span class="keyword">while</span>(!leaf.empty())&#123;</span><br><span class="line">		<span class="keyword">int</span> child = leaf.front();</span><br><span class="line">		<span class="comment">//printf("%d ", child);</span></span><br><span class="line">		leaf.pop();</span><br><span class="line">		++dp[child][<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">if</span>(con[child] == <span class="number">0</span>)&#123;</span><br><span class="line">			dp[child][<span class="number">0</span>] += minchild[child];</span><br><span class="line">		&#125;</span><br><span class="line">		visit[child] = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator i = v[child].begin(); i != v[child].end(); ++i)&#123;</span><br><span class="line">			<span class="keyword">if</span>(visit[*i] == <span class="number">0</span>)&#123;</span><br><span class="line">				--hasinqueue[*i];</span><br><span class="line">				<span class="keyword">if</span>(hasinqueue[*i] == <span class="number">0</span>)&#123;</span><br><span class="line">					leaf.push(*i);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(dp[*i][<span class="number">0</span>] != <span class="number">-1</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(dp[child][<span class="number">0</span>] == <span class="number">-1</span>)&#123;</span><br><span class="line">						<span class="keyword">if</span>(con[*i])dp[*i][<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">						<span class="keyword">else</span>&#123;</span><br><span class="line">							++con[*i];</span><br><span class="line">							dp[*i][<span class="number">0</span>] += dp[child][<span class="number">1</span>];</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						dp[*i][<span class="number">0</span>] += dp[child][<span class="number">0</span>];</span><br><span class="line">						<span class="keyword">if</span>(con[*i] == <span class="number">0</span>)&#123;</span><br><span class="line">							minchild[*i] = min(minchild[*i], dp[child][<span class="number">1</span>] - dp[child][<span class="number">0</span>]);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				<span class="keyword">if</span>(dp[child][<span class="number">2</span>] == <span class="number">-1</span>)&#123;</span><br><span class="line">					dp[*i][<span class="number">1</span>] += dp[child][<span class="number">1</span>];</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					dp[*i][<span class="number">1</span>] += min(dp[child][<span class="number">1</span>], dp[child][<span class="number">2</span>]);</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				<span class="keyword">if</span>(dp[*i][<span class="number">2</span>] != <span class="number">-1</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(dp[child][<span class="number">0</span>] == <span class="number">-1</span>)dp[*i][<span class="number">2</span>] = <span class="number">-1</span>;</span><br><span class="line">					<span class="keyword">else</span>&#123;</span><br><span class="line">						dp[*i][<span class="number">2</span>] += dp[child][<span class="number">0</span>];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(leaf.empty())&#123;</span><br><span class="line">			ret = child;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//printf("\n");</span></span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(flag != <span class="number">-1</span>)&#123;</span><br><span class="line">		initialization();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">int</span> father, child;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;father, &amp;child);</span><br><span class="line">			v[father].push_back(child);</span><br><span class="line">			v[child].push_back(father);</span><br><span class="line">		&#125;</span><br><span class="line">		visit[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">		findleaf(<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">memset</span>(visit, <span class="number">0</span>, <span class="keyword">sizeof</span>(visit));</span><br><span class="line">		<span class="keyword">int</span> root = cal();</span><br><span class="line">		<span class="keyword">int</span> ret = <span class="number">0x7fffffff</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; ++i)&#123;</span><br><span class="line">			<span class="keyword">if</span>(dp[root][i] == <span class="number">-1</span>)<span class="keyword">continue</span>;</span><br><span class="line">			ret = min(ret, dp[root][i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ret);</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		printf("root = %d\n", root);</span></span><br><span class="line"><span class="comment">		for(int i = 0; i &lt; n; ++i)&#123;</span></span><br><span class="line"><span class="comment">			for(int j = 0; j &lt; 3; ++j)&#123;</span></span><br><span class="line"><span class="comment">				printf("%d ",dp[i + 1][j]);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">			printf("\n");</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;flag);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="几种复杂状态的动态规划"><a href="#几种复杂状态的动态规划" class="headerlink" title="几种复杂状态的动态规划"></a>几种复杂状态的动态规划</h1><h2 id="最优配对问题"><a href="#最优配对问题" class="headerlink" title="最优配对问题"></a>最优配对问题</h2><h3 id="描述-14"><a href="#描述-14" class="headerlink" title="描述"></a>描述</h3><p>有20个点，欲使之两两配对，从而每一对点之间的距离之和最小。</p>
<h3 id="解法-3"><a href="#解法-3" class="headerlink" title="解法"></a>解法</h3><p>我们可以假定一个集合S，假设<code>d[S]</code>表示集合S内部的点两两配对得到的距离之和最小值。那么有：</p>
<p><code>d[S] = min(d[S-{i,j}]+dist(i,j))|i,j∈S)</code></p>
<p>那么，我们怎么来表示这样一个集合呢？</p>
<p>集合的表示可以使用二进制，每个元素占一位，如果集合包含该元素，那么表示该集合的数字对应位就是1，否则就是0。</p>
<p>比如对于全集{i,j,k}的子集，001表示{k}，101表示{i,k}，000表示空集，以此类推。</p>
<p>这样，我们可以从0到2^20-1遍历S（这里的^表示乘方），从而更新状态。</p>
<p>这样的时间复杂度是O(n<em> n</em> 2^n)。</p>
<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>上述解法认为，集合S的前一个状态，是从S中任意取出两个元素i，j之后的集合S’，但是，我们可以这样去思考：集合中最小的那个元素，一定需要有集合中另外一个元素与之配对，所以集合S的前身可以是所有去掉最小元素i和任意元素j的子集。</p>
<p>我们可以举例说明这样做并不会漏解。</p>
<p>假设S={1,2,3,4,5}，那么按照上面的方法，S的前身可以是：</p>
<p>{1,2,3},{1,2,4},{1,2,5},{1,3,4},{1,3,5},{1,4,5},{2,3,4},{2,3,5},{2,4,5},{3,4,5}。</p>
<p>但实际上，我们观察一种情况，从S转化成{1,2,3}和从S转化成{1,4,5}，这两种情况再向前一步，又都可以转化为{1}，所以我们发现，在这个计算过程中有一部分是重复计算。而把集合S的前身考虑为是所有去掉最小元素i和任意元素j的子集，就避免了这种重复计算，可以把时间复杂度进一步降低到O(n* 2^n)。</p>
<h2 id="货郎担问题"><a href="#货郎担问题" class="headerlink" title="货郎担问题"></a>货郎担问题</h2><h3 id="描述-15"><a href="#描述-15" class="headerlink" title="描述"></a>描述</h3><p>有n个城市两两之间有一条公路相连，每条公路的长度为Lij，n&lt;16，求出一条经过每个城市一次并回到起点的最短路。</p>
<h3 id="解法-4"><a href="#解法-4" class="headerlink" title="解法"></a>解法</h3><p>可以直接规定从城市0出发，设状态<code>dp[i][S]</code>为当前在城市i，还没去过的城市集合是S，这种状态下所走过的最短路径。</p>
<p>时间复杂度为(n<em> n</em> 2^n)。</p>
<h2 id="图的点色数"><a href="#图的点色数" class="headerlink" title="图的点色数"></a>图的点色数</h2><h3 id="描述-16"><a href="#描述-16" class="headerlink" title="描述"></a>描述</h3><p>给无向图G中的点染色，求出所需颜色数的最小值，使得任何两个相邻的顶点颜色都不相同。</p>
<h3 id="解法-5"><a href="#解法-5" class="headerlink" title="解法"></a>解法</h3><p>设<code>dp[S]</code>为给集合S内的点染色所需颜色数，那么假设S的一个子集是S’，S’中所有的点两两不相邻，那么</p>
<p><code>dp[S] = min(dp[S-S&#39;]+1)</code></p>
<p>怎么枚举集合的子集呢，以s为例。</p>
<p><code>for(int s0 = s; s0; s0 = (s0 - 1) &amp; s)</code></p>
<p>算法枚举了全集的子集的子集，时间复杂度相当于所有子集的子集个数之和，用二项式定理可以知道，时间复杂度是O(3^n)。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>复杂的状态往往需要使用集合来表示，因为这种情况往往要枚举子集，时间复杂度是常数的n次方，所以问题的规模一般会很小。</p>
<p>并且，解决这种问题要对集合的二进制表示有所了解。</p>
<h1 id="CH0103-最短Hamilton路径"><a href="#CH0103-最短Hamilton路径" class="headerlink" title="CH0103_最短Hamilton路径"></a>CH0103_最短Hamilton路径</h1><h2 id="描述-17"><a href="#描述-17" class="headerlink" title="描述"></a>描述</h2><p>给定一张n(n≤20)个点的带权无向图，点从0~n-1标号，求起点0到终点n-1的最短Hamilton路径。Hamilton路径的定义是从0到n-1不重不漏地经过每个点恰好一次。</p>
<h2 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h2><p>由于点数小于等于20，记录一个点走没走过可以用一个二进制位，总共需要20位即1024* 1024种状态，存储下每个状态的可能值是可行的，这一点启发了我。</p>
<p>状压dp，设置状态<code>dp[X][Y]</code>，X含义为一种局势，代表还有哪些点没走，Y含义为终点编号，初始状态是X为全1（1的个数为n-2个），Y为n-1，代表以n-1为终点，所有的点都没走过的状态。</p>
<p>X是这样对应没走过的点的：当X的第i低位为1时，代表编号为i的点没走过。</p>
<p>之后，从当前状态取出一个没走过的点，将其设为新终点，并标记该点已经走过了，得到一个新的状态X^，Y^，计算新状态下的权值，查看它是否比已有的方案好，若是，更新已有的方案。</p>
<p>层层递归，终点是X=0表示只有编号为0的点没走过，这时会直接返回0到点Y的距离。</p>
<h2 id="解决-16"><a href="#解决-16" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1024</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[<span class="number">21</span>][<span class="number">21</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[N * N][<span class="number">21</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> base)</span></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span> (base)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x1</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x2</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x4</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x8</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x10</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x20</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">6</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x40</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">7</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x80</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x100</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">9</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x200</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x400</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">11</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x800</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x1000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">13</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x2000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">14</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x4000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">15</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x8000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">16</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x10000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">17</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x20000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">18</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x40000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">19</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0x80000</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> last)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!id) <span class="keyword">return</span> g[<span class="number">0</span>][last];</span><br><span class="line">	<span class="keyword">if</span>(dp[id][last] != <span class="number">-1</span>) <span class="keyword">return</span> dp[id][last];</span><br><span class="line">	dp[id][last] = <span class="number">0x7fffffff</span>;</span><br><span class="line">	<span class="keyword">int</span> tid = id;</span><br><span class="line">	<span class="keyword">while</span>(tid)&#123;</span><br><span class="line">		<span class="keyword">int</span> base = tid &amp; (-tid);</span><br><span class="line">		<span class="keyword">int</span> nxt = f(base);</span><br><span class="line">		<span class="keyword">int</span> tdp = cal(id^base, nxt);</span><br><span class="line">		dp[id][last] = dp[id][last] &gt; tdp + g[last][nxt] ? tdp + g[last][nxt] : dp[id][last];</span><br><span class="line">		tid ^= base;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[id][last];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;g[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> id = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">2</span>; ++i)&#123;</span><br><span class="line">		id &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">		++id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cal(id, n - <span class="number">1</span>));</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	for(int i = 0; i &lt;= id; ++i)&#123;</span></span><br><span class="line"><span class="comment">		printf("%d %d\n", i, dp[i]);</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="反思和坑"><a href="#反思和坑" class="headerlink" title="反思和坑"></a>反思和坑</h2><p>状态中一定要把Y带上，因为看似两种状态没走过的点是一样的，但它们终点不一样的话，得到的值必定不同。</p>
<p>不算起点终点，总状态最多为2^18* 19种。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/基础算法/" rel="tag"># 基础算法</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2023/01/16/算法题整理——贪心/" rel="next" title="算法题整理——贪心">
                <i class="fa fa-chevron-left"></i> 算法题整理——贪心
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2023/01/17/算法题整理——排序/" rel="prev" title="算法题整理——排序">
                算法题整理——排序 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jameci</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">55</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#数字三角形"><span class="nav-number">1.</span> <span class="nav-text">数字三角形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述"><span class="nav-number">1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#递归方法"><span class="nav-number">1.2.</span> <span class="nav-text">递归方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#记忆化搜索"><span class="nav-number">1.3.</span> <span class="nav-text">记忆化搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#递推"><span class="nav-number">1.4.</span> <span class="nav-text">递推</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DAG上的动态规划"><span class="nav-number">2.</span> <span class="nav-text">DAG上的动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#嵌套矩形问题"><span class="nav-number">2.1.</span> <span class="nav-text">嵌套矩形问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-1"><span class="nav-number">2.1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析"><span class="nav-number">2.1.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PAG上的最长路及其字典序"><span class="nav-number">2.1.3.</span> <span class="nav-text">PAG上的最长路及其字典序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#硬币问题"><span class="nav-number">2.2.</span> <span class="nav-text">硬币问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-2"><span class="nav-number">2.2.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析-1"><span class="nav-number">2.2.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#固定端点的最长路问题"><span class="nav-number">2.2.3.</span> <span class="nav-text">固定端点的最长路问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#几种经典的树上动态规划问题"><span class="nav-number">3.</span> <span class="nav-text">几种经典的树上动态规划问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#树上的最大独立集"><span class="nav-number">3.1.</span> <span class="nav-text">树上的最大独立集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-3"><span class="nav-number">3.1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法"><span class="nav-number">3.1.2.</span> <span class="nav-text">解法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#树的质心"><span class="nav-number">3.2.</span> <span class="nav-text">树的质心</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-4"><span class="nav-number">3.2.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法-1"><span class="nav-number">3.2.2.</span> <span class="nav-text">解法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#树的最长路径"><span class="nav-number">3.3.</span> <span class="nav-text">树的最长路径</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-5"><span class="nav-number">3.3.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法-2"><span class="nav-number">3.3.2.</span> <span class="nav-text">解法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1025-城市里的间谍"><span class="nav-number">4.</span> <span class="nav-text">UVa1025_城市里的间谍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-6"><span class="nav-number">4.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路"><span class="nav-number">4.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决"><span class="nav-number">4.3.</span> <span class="nav-text">解决</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#错误思路和反思"><span class="nav-number">4.4.</span> <span class="nav-text">错误思路和反思</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa437-巴比伦塔"><span class="nav-number">5.</span> <span class="nav-text">UVa437_巴比伦塔</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意"><span class="nav-number">5.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-2"><span class="nav-number">5.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-1"><span class="nav-number">5.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1347-旅行"><span class="nav-number">6.</span> <span class="nav-text">UVa1347_旅行</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-1"><span class="nav-number">6.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-3"><span class="nav-number">6.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-2"><span class="nav-number">6.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa116-单向TSP"><span class="nav-number">7.</span> <span class="nav-text">UVa116_单向TSP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-2"><span class="nav-number">7.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-4"><span class="nav-number">7.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-3"><span class="nav-number">7.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0-1背包"><span class="nav-number">8.</span> <span class="nav-text">0-1背包</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#引子——无限背包问题"><span class="nav-number">8.1.</span> <span class="nav-text">引子——无限背包问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-1背包问题"><span class="nav-number">8.2.</span> <span class="nav-text">0-1背包问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVA12563-劲歌金曲"><span class="nav-number">9.</span> <span class="nav-text">UVA12563_劲歌金曲</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-3"><span class="nav-number">9.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-5"><span class="nav-number">9.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-4"><span class="nav-number">9.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#51Nod1134-最长递增子序列"><span class="nav-number">10.</span> <span class="nav-text">51Nod1134_最长递增子序列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-7"><span class="nav-number">10.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-6"><span class="nav-number">10.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-5"><span class="nav-number">10.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVA11400-照明系统设计"><span class="nav-number">11.</span> <span class="nav-text">UVA11400_照明系统设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-8"><span class="nav-number">11.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-7"><span class="nav-number">11.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-6"><span class="nav-number">11.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa11584-回文串划分"><span class="nav-number">12.</span> <span class="nav-text">UVa11584_回文串划分</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-9"><span class="nav-number">12.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-8"><span class="nav-number">12.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-7"><span class="nav-number">12.3.</span> <span class="nav-text">解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#备注"><span class="nav-number">12.3.1.</span> <span class="nav-text">备注</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1625-颜色的长度"><span class="nav-number">13.</span> <span class="nav-text">UVa1625_颜色的长度</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-4"><span class="nav-number">13.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-1"><span class="nav-number">13.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-8"><span class="nav-number">13.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa10003-切木棍"><span class="nav-number">14.</span> <span class="nav-text">UVa10003_切木棍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-5"><span class="nav-number">14.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-2"><span class="nav-number">14.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-9"><span class="nav-number">14.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1626-括号序列"><span class="nav-number">15.</span> <span class="nav-text">UVa1626_括号序列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-6"><span class="nav-number">15.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-9"><span class="nav-number">15.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-10"><span class="nav-number">15.3.</span> <span class="nav-text">解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#备注-1"><span class="nav-number">15.3.1.</span> <span class="nav-text">备注</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1331-最优三角剖分"><span class="nav-number">16.</span> <span class="nav-text">UVa1331_最优三角剖分</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#题意-7"><span class="nav-number">16.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-3"><span class="nav-number">16.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-11"><span class="nav-number">16.3.</span> <span class="nav-text">解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#备注-2"><span class="nav-number">16.3.1.</span> <span class="nav-text">备注</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa12099-书架"><span class="nav-number">17.</span> <span class="nav-text">UVa12099_书架</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-10"><span class="nav-number">17.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据范围"><span class="nav-number">17.2.</span> <span class="nav-text">数据范围</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-4"><span class="nav-number">17.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-12"><span class="nav-number">17.4.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa12186-工人的请愿书"><span class="nav-number">18.</span> <span class="nav-text">UVa12186_工人的请愿书</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-11"><span class="nav-number">18.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-5"><span class="nav-number">18.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-13"><span class="nav-number">18.3.</span> <span class="nav-text">解决</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#细节"><span class="nav-number">18.3.1.</span> <span class="nav-text">细节</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#向上取整"><span class="nav-number">18.3.1.1.</span> <span class="nav-text">向上取整</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#工人的dp值"><span class="nav-number">18.3.1.2.</span> <span class="nav-text">工人的dp值</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1220-Hali-Bula的晚会"><span class="nav-number">19.</span> <span class="nav-text">UVa1220_Hali-Bula的晚会</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-12"><span class="nav-number">19.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-10"><span class="nav-number">19.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-14"><span class="nav-number">19.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UVa1218-完美的服务"><span class="nav-number">20.</span> <span class="nav-text">UVa1218_完美的服务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-13"><span class="nav-number">20.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分析-11"><span class="nav-number">20.2.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-15"><span class="nav-number">20.3.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#几种复杂状态的动态规划"><span class="nav-number">21.</span> <span class="nav-text">几种复杂状态的动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#最优配对问题"><span class="nav-number">21.1.</span> <span class="nav-text">最优配对问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-14"><span class="nav-number">21.1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法-3"><span class="nav-number">21.1.2.</span> <span class="nav-text">解法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#改进"><span class="nav-number">21.1.3.</span> <span class="nav-text">改进</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#货郎担问题"><span class="nav-number">21.2.</span> <span class="nav-text">货郎担问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-15"><span class="nav-number">21.2.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法-4"><span class="nav-number">21.2.2.</span> <span class="nav-text">解法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图的点色数"><span class="nav-number">21.3.</span> <span class="nav-text">图的点色数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述-16"><span class="nav-number">21.3.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法-5"><span class="nav-number">21.3.2.</span> <span class="nav-text">解法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">21.4.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CH0103-最短Hamilton路径"><span class="nav-number">22.</span> <span class="nav-text">CH0103_最短Hamilton路径</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-17"><span class="nav-number">22.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-6"><span class="nav-number">22.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决-16"><span class="nav-number">22.3.</span> <span class="nav-text">解决</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#反思和坑"><span class="nav-number">22.4.</span> <span class="nav-text">反思和坑</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jameci</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
